"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3099],{355:(e,a,s)=>{s.d(a,{A:()=>u});var o=s(89379),t=s(9950),i=s(9449),l=s(28429),r=s(28504),c=s(54826),n=s(35887),d=s(26910),m=s(44414);const u=()=>{var e;const{register:a,handleSubmit:s,watch:u,formState:{errors:p}}=(0,i.mN)(),{Login:g}=(0,r.S)(),x=(0,l.Zp)(),[b,h]=(0,t.useState)(!1),[y,v]=(0,t.useState)(!1),[N,f]=(0,t.useState)(!1),S=u("category"),j=u("subCategory");return(0,m.jsx)("div",{className:"flex items-center justify-center bg-gray-100 p-7",children:(0,m.jsx)("div",{className:"w-full max-w-4xl rounded-lg bg-white p-14 shadow-md lg:max-w-5xl xl:max-w-6xl",children:(0,m.jsxs)("form",{onSubmit:s(async e=>{f(!0);const{role:a,category:s,subCategory:o,specialization:t,healthcareId:i,password:l}=e,r=localStorage.getItem("signupEmail"),c=localStorage.getItem("signupMobile"),m=localStorage.getItem("signupName"),u=localStorage.getItem("emailOtp"),p=localStorage.getItem("mobileOtp"),b="".concat(i,"@hpr.abdm");if(!r||!c||!m||!u||!p)return n.Ay.error("Please complete the sign-up process first."),void f(!1);if(!a||!s||!o||!t||!i||!l)return n.Ay.error("Please fill in all required fields."),void f(!1);const h={email:r,mobileNumber:c,fullName:m,emailOtp:u,mobileOtp:p,role:String(a),category:s,subCategory:o,specialization:t,userName:b,password:l},y={email:h.email,mobileNumber:h.mobileNumber,fullName:h.fullName,emailOtp:"***",mobileOtp:"***",role:h.role,category:h.category,subCategory:h.subCategory,specialization:h.specialization,userName:h.userName,password:"***"};console.log("Sending doctor creation payload:",y),console.log("Full payload structure:",JSON.stringify(h,null,2).replace(/"password":\s*"[^"]*"/,'"password": "***"').replace(/"emailOtp":\s*"[^"]*"/,'"emailOtp": "***"').replace(/"mobileOtp":\s*"[^"]*"/,'"mobileOtp": "***"'));try{var v;const e=await d.A.post("".concat("","/doctor/doctor-create"),h,{headers:{"Content-Type":"application/json"},withCredentials:!0});n.Ay.success("Doctor ID Generated Successfully!"),console.log("Doctor creation response:",e.data);const a=(null===(v=e.data)||void 0===v?void 0:v.data)||e.data,s=null===a||void 0===a?void 0:a.requiresTotpSetup,o=null===a||void 0===a?void 0:a.userId;if(s&&o)console.log("TOTP setup required, navigating to TOTP setup page"),localStorage.removeItem("signupEmail"),localStorage.removeItem("signupMobile"),localStorage.removeItem("signupName"),localStorage.removeItem("emailOtp"),localStorage.removeItem("mobileOtp"),localStorage.setItem("totpSetupUserId",o),x("/totp-setup",{state:{userId:o}});else{console.log("TOTP setup not required, auto-logging in");const e={email:r,password:l};await g(e,x),localStorage.removeItem("signupEmail"),localStorage.removeItem("signupMobile"),localStorage.removeItem("signupName"),localStorage.removeItem("emailOtp"),localStorage.removeItem("mobileOtp")}}catch(I){var N,S,j,w,z,C,P,A,D;console.error("Doctor Creation Failed:",I),console.error("Error response:",null===(N=I.response)||void 0===N?void 0:N.data),console.error("Error status:",null===(S=I.response)||void 0===S?void 0:S.status),console.error("Error message:",null===(j=I.response)||void 0===j||null===(w=j.data)||void 0===w?void 0:w.message);const e=(null===(z=I.response)||void 0===z||null===(C=z.data)||void 0===C?void 0:C.message)||(null===(P=I.response)||void 0===P||null===(A=P.data)||void 0===A?void 0:A.error)||I.message||"Failed to generate Doctor ID. Please try again.";n.Ay.error(e),null!==(D=I.response)&&void 0!==D&&D.data&&console.error("Full error response:",JSON.stringify(I.response.data,null,2))}finally{f(!1)}}),className:"space-y-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Roles"}),(0,m.jsxs)("div",{className:"mt-2 flex flex-col gap-3",children:[(0,m.jsxs)("label",{className:"flex items-center gap-2",children:[(0,m.jsx)("input",(0,o.A)((0,o.A)({type:"radio"},a("role",{required:"Please select a role"})),{},{value:"1",className:"form-radio"})),"I am a Healthcare Professional"]}),(0,m.jsxs)("label",{className:"flex items-center gap-2",children:[(0,m.jsx)("input",(0,o.A)((0,o.A)({type:"radio"},a("role",{required:"Please select a role"})),{},{value:"3",className:"form-radio"})),"I am a Healthcare Professional & Facility Manager"]})]}),p.role&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.role.message})]}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Category"}),(0,m.jsxs)("select",(0,o.A)((0,o.A)({},a("category",{required:"Category is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Category",children:[(0,m.jsx)("option",{value:"",children:"Select"}),(0,m.jsx)("option",{value:"Doctor",children:"Doctor"}),(0,m.jsx)("option",{value:"Nurse",children:"Nurse"})]})),p.category&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.category.message})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Sub Category"}),(0,m.jsxs)("select",(0,o.A)((0,o.A)({},a("subCategory",{required:"Sub Category is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Sub Category",disabled:!S,children:[(0,m.jsx)("option",{value:"",children:"Select"}),("Doctor"===S?[{subCategory:"Modern Medicine",code:1},{subCategory:"Dentist",code:2},{subCategory:"Homoeopathy",code:3},{subCategory:"Ayurveda",code:4},{subCategory:"Unani",code:5},{subCategory:"Siddha",code:6},{subCategory:"Sowa-Rigpa",code:7},{subCategory:"Nutrician",code:8},{subCategory:"Dietician",code:9}]:[{subCategory:"RANM",code:8},{subCategory:"RN",code:9},{subCategory:"RN & RM",code:10},{subCategory:"RLHV",code:11}]).map(e=>(0,m.jsx)("option",{value:"".concat(e.subCategory,"#").concat(e.code),children:e.subCategory},e.code))]})),p.subCategory&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.subCategory.message})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Specialization"}),(0,m.jsxs)("select",(0,o.A)((0,o.A)({},a("specialization",{required:"Specialization is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Specialization",disabled:!j,children:[(0,m.jsx)("option",{value:"",children:"Select"}),j&&(null===(e={"Modern Medicine#1":[{specialization:"Cardiologist",code:"CAR"},{specialization:"Neurologist",code:"NEU"},{specialization:"Orthopaedic Surgeon",code:"ORT"},{specialization:"Gastroenterologist",code:"GAS"},{specialization:"Dermatologist",code:"DER"},{specialization:"Pediatrician",code:"PED"},{specialization:"Radiologist",code:"RAD"},{specialization:"Psychiatrist",code:"PSY"},{specialization:"Endocrinologist",code:"END"},{specialization:"Pulmonologist",code:"PUL"},{specialization:"Nephrologist",code:"NEP"},{specialization:"Oncologist",code:"ONC"},{specialization:"ENT Specialist",code:"ENT"},{specialization:"Ophthalmologist",code:"OPH"},{specialization:"Urologist",code:"URO"},{specialization:"General Surgeon",code:"GSU"},{specialization:"Plastic Surgeon",code:"PLS"},{specialization:"Emergency Medicine",code:"EMR"},{specialization:"Family Physician",code:"FAM"},{specialization:"Rheumatologist",code:"RHE"},{specialization:"Infectious Disease",code:"INF"}],"Dentist#2":[{specialization:"Orthodontist",code:"ORTH"},{specialization:"Periodontist",code:"PERI"},{specialization:"Endodontist",code:"ENDO"},{specialization:"Prosthodontist",code:"PROS"},{specialization:"Oral & Maxillofacial Surgeon",code:"OMS"},{specialization:"Pediatric Dentist",code:"PEDD"},{specialization:"Oral Medicine",code:"OMD"}],"Homoeopathy#3":[{specialization:"General Homoeopathy",code:"HOM"},{specialization:"Pediatric Homoeopathy",code:"PHO"},{specialization:"Dermatologic Homoeopathy",code:"DHO"},{specialization:"Psychiatric Homoeopathy",code:"PSH"}],"Ayurveda#4":[{specialization:"Panchakarma Specialist",code:"PAN"},{specialization:"Kayachikitsa (Internal Medicine)",code:"KAY"},{specialization:"Shalya Tantra (Surgery)",code:"SHY"},{specialization:"Shalakya Tantra (ENT & Ophthalmology)",code:"SHL"},{specialization:"Bala Roga (Pediatrics)",code:"BAL"},{specialization:"Rasashastra & Bhaishajya Kalpana",code:"RAS"}],"Unani#5":[{specialization:"General Unani",code:"UNA"},{specialization:"Tibb-e-Akbar (Internal Medicine)",code:"TAB"},{specialization:"Ilmul Qabalat wa Amraze Niswan (Obstetrics & Gynaecology)",code:"IQN"}],"Siddha#6":[{specialization:"Siddha Medicine",code:"SID"},{specialization:"Siddha Pulmonology",code:"SPD"}],"Sowa-Rigpa#7":[{specialization:"Traditional Sowa-Rigpa",code:"SOW"},{specialization:"Sowa-Rigpa Internal Medicine",code:"SRM"}],"RANM#8":[{specialization:"General Nursing",code:"GN"},{specialization:"Community Health Nurse",code:"CHN"}],"RN#9":[{specialization:"Registered Nurse Specialist",code:"RNS"},{specialization:"Critical Care Nurse",code:"CCN"},{specialization:"Pediatric Nurse",code:"PEN"},{specialization:"Psychiatric Nurse",code:"PSN"}],"RN & RM#10":[{specialization:"Midwifery Specialist",code:"MID"},{specialization:"Maternal & Child Health",code:"MCH"}],"RLHV#11":[{specialization:"Rural Health Specialist",code:"RHS"},{specialization:"Primary Health Care",code:"PHC"}]}[j])||void 0===e?void 0:e.map(e=>(0,m.jsx)("option",{value:"".concat(e.specialization,"#").concat(e.code),children:e.specialization},e.code)))]})),p.specialization&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.specialization.message})]})]}),(0,m.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,m.jsxs)("div",{className:"relative w-full",children:[(0,m.jsx)("label",{className:"mb-1 block font-medium",children:"Healthcare Professional ID / Username"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",(0,o.A)((0,o.A)({type:"text"},a("healthcareId",{required:"Healthcare ID is required",pattern:{value:/^[a-zA-Z0-9._-]+$/,message:"Only letters, numbers, dots, underscores allowed"}})),{},{placeholder:"username",className:"w-full rounded border p-3 pr-28"})),(0,m.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"@hpr.abdm"})]}),p.healthcareId&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.healthcareId.message})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Password"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",(0,o.A)((0,o.A)({type:b?"text":"password"},a("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must include uppercase, lowercase, number, and special character"}})),{},{className:"w-full rounded border p-3 pr-10","aria-label":"Password"})),(0,m.jsx)("button",{type:"button",onClick:()=>h(!b),className:"absolute inset-y-0 right-3 flex items-center","aria-label":b?"Hide password":"Show password",children:b?(0,m.jsx)(c.mx3,{}):(0,m.jsx)(c.Ny1,{})})]}),p.password&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.password.message})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"block font-medium",children:"Confirm Password"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("input",(0,o.A)((0,o.A)({type:y?"text":"password"},a("confirmPassword",{required:"Confirm your password",validate:e=>e===u("password")||"Passwords do not match"})),{},{className:"w-full rounded border p-3 pr-10","aria-label":"Confirm Password"})),(0,m.jsx)("button",{type:"button",onClick:()=>v(!y),className:"absolute inset-y-0 right-3 flex items-center","aria-label":y?"Hide password":"Show password",children:y?(0,m.jsx)(c.mx3,{}):(0,m.jsx)(c.Ny1,{})})]}),p.confirmPassword&&(0,m.jsx)("p",{className:"text-sm text-red-500",children:p.confirmPassword.message})]})]}),(0,m.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-blue-500 p-3 text-white transition hover:bg-blue-600 disabled:bg-blue-300",disabled:N,children:N?"Generating...":"Submit"})]})})})}},36490:(e,a,s)=>{s.d(a,{A:()=>n});var o=s(9950),t=s(28429),i=s(26910),l=s(35887),r=s(44414);const c=[{code:"+1",country:"US"},{code:"+91",country:"IN"},{code:"+44",country:"UK"},{code:"+61",country:"AU"},{code:"+81",country:"JP"}],n=()=>{const e=(0,t.Zp)(),[a,s]=(0,o.useState)(""),[n,d]=(0,o.useState)(""),[m,u]=(0,o.useState)(""),[p,g]=(0,o.useState)("+91"),[x,b]=(0,o.useState)(!1),[h,y]=(0,o.useState)(""),[v,N]=(0,o.useState)("");return(0,r.jsx)("section",{className:"flex items-center justify-center p-2 sm:p-4",children:(0,r.jsx)("div",{className:"w-full max-w-xl rounded-lg border p-4 sm:p-6 md:p-10 lg:p-14 text-gray-500 shadow-sm bg-white",children:(0,r.jsxs)("form",{onSubmit:async s=>{s.preventDefault(),b(!0);const o={email:n,mobileNumber:"".concat(m),fullName:a};try{const a=await i.A.post("".concat("","/doctor/send-otp"),o),s=(null===a||void 0===a?void 0:a.data)||{},t=((null===s||void 0===s?void 0:s.message)||"").toString();if(((null===s||void 0===s?void 0:s.statusCode)||(null===s||void 0===s?void 0:s.code)||(null===a||void 0===a?void 0:a.status))>=400||/exist|already|expired|required|invalid|fail/i.test(t))return void l.Ay.error(t||"Something went wrong. Please try again.");const{emailOtp:r,mobileOtp:c}=s.data||{};if(!r||!c)return void l.Ay.error("Failed to send OTP. Please try again.");l.Ay.success("OTP sent successfully to your email and mobile!"),localStorage.setItem("signupEmail",o.email),localStorage.setItem("signupMobile",o.mobileNumber),localStorage.setItem("signupName",o.fullName),localStorage.setItem("emailOtp",r),localStorage.setItem("mobileOtp",c),e("/twoVerify")}catch(c){var t,r;console.error("Sign Up Failed:",c);const e=(null===c||void 0===c||null===(t=c.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||(null===c||void 0===c?void 0:c.message)||"Sign Up failed. Please try again.";l.Ay.error(e)}finally{b(!1)}},className:"space-y-4 sm:space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium text-gray-700 text-sm sm:text-base",children:"Full Name"}),(0,r.jsx)("input",{type:"text",placeholder:"Enter your full name",value:a,onChange:e=>s(e.target.value),className:"mt-1 w-full rounded-lg border p-2.5 sm:p-3 text-sm sm:text-base focus:border-[#0095D9] focus:ring-[#0095D9]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium text-gray-700 text-sm sm:text-base",children:"Email Address"}),(0,r.jsx)("input",{type:"email",placeholder:"Enter your email",value:n,onChange:e=>d(e.target.value),className:"mt-1 w-full rounded-lg border p-2.5 sm:p-3 text-sm sm:text-base focus:border-[#0095D9] focus:ring-[#0095D9]",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block font-medium text-gray-700 text-sm sm:text-base mb-2",children:"Mobile Number"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-0 sm:items-center",children:[(0,r.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"sm:mr-2 rounded-lg border p-2.5 sm:p-2 text-sm sm:text-base focus:border-[#0095D9] focus:ring-[#0095D9] w-full sm:w-auto sm:min-w-[140px]",children:c.map(e=>(0,r.jsxs)("option",{value:e.code,children:[e.code," (",e.country,")"]},e.code))}),(0,r.jsx)("input",{type:"text",placeholder:"Enter your mobile number",value:m,onChange:e=>u(e.target.value),className:"w-full rounded-lg border p-2.5 sm:p-3 text-sm sm:text-base focus:border-[#0095D9] focus:ring-[#0095D9]",required:!0})]})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"offers",checked:h,onChange:()=>y(!h),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#0095D9] focus:ring-[#0095D9] flex-shrink-0"}),(0,r.jsx)("p",{className:"text-gray-700 text-xs sm:text-sm",children:"Receive relevant offers and promotional communication from Avijo"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"terms",checked:v,onChange:()=>N(!v),className:"mt-1 h-4 w-4 rounded border-gray-300 text-[#0095D9] focus:ring-[#0095D9] flex-shrink-0",required:!0}),(0,r.jsxs)("p",{className:"text-gray-700 text-xs sm:text-sm",children:["By signing up, I agree to the"," ",(0,r.jsx)("a",{href:"/terms",className:"text-[#0095D9] hover:underline",children:"Terms & Conditions"})]})]}),(0,r.jsx)("button",{type:"submit",className:"mt-4 flex w-full items-center justify-center rounded-lg bg-[#0095D9] py-2.5 sm:py-3 font-semibold text-white hover:bg-[#007bbd] text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:x?(0,r.jsx)("span",{className:"h-5 w-5 animate-spin rounded-full border-2 border-white border-t-transparent"}):"Register"})]})})})}},83099:(e,a,s)=>{s.r(a),s.d(a,{default:()=>c});var o=s(9950),t=(s(53663),s(39511),s(38613),s(44414));s(355);var i=s(45574),l=s(61094),r=s(36490);const c=function(){const[e,a]=(0,o.useState)(1);return(0,o.useEffect)(()=>{localStorage.setItem("myPath",window.location.pathname)},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.A,{}),(0,t.jsxs)("div",{className:"mx-auto w-11/12 bg-gray-100 mt-3",children:[(0,t.jsx)("div",{className:"flex justify-center gap-[1rem] border-b border-gray-200 text-2xl",children:["Login","Generate ID"].map((s,o)=>(0,t.jsx)("span",{onClick:()=>a(o),className:"cursor-pointer px-[5rem] py-[1rem] text-center ".concat(e===o?"border-b-4 border-[#0097DB] text-[#0097DB]":"text-gray-500"," px-4 py-2"),children:s},o))}),0===e?(0,t.jsx)(l.A,{}):(0,t.jsx)(r.A,{})]})]})}}}]);