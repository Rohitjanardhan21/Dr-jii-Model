"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[446],{10446:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var s=i(89379),l=i(9950),n=(i(57939),i(17340)),a=i(50384),o=i(54826),d=i(73422),r=i(31222),c=i(68873),u=i(21636),m=i(68601),v=i(26678),p=i(26910),f=i(28504),g=i(58644),h=i(35887),x=i(44414);const y=(0,d.Ay)("".concat(""),{withCredentials:!0,transports:["websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,autoConnect:!0,forceNew:!1}),w=e=>{var t;const[n,a]=(0,l.useState)([]),{doctor:o}=(0,f.S)(),[d,y]=(0,l.useState)(!1),[w,N]=(0,l.useState)(""),[j,b]=(0,l.useState)([]),[I,A]=(0,l.useState)([]),[S,C]=(0,l.useState)([]),[D,R]=(0,l.useState)(null),[E,k]=(0,l.useState)(!1),[P,L]=(0,l.useState)(!1),[T,M]=(0,l.useState)(!1),[z,F]=(0,l.useState)(!1),[_,B]=(0,l.useState)(!0);(0,l.useEffect)(()=>{null!==o&&void 0!==o&&o._id&&(async()=>{try{var t;const i=null===(t=o._id)||void 0===t?void 0:t.toString();if(!i)return;const s=await p.A.post("".concat("","/user/getAll"),{userId:i});if(s.data.success){const t=s.data.usersWithLastMessage.map((e,t)=>({id:t+1,userId:e.userId,sender:e.userName||"Unknown",text:e.lastMessage||"",image:e.userImage||"/default-user.png",timestamp:e.timestamp||(new Date).toISOString(),unreadCount:e.unreadCount||0}));a(t),t.length>0&&!e.selectedReceiverId&&(e.onSelectReceiver(t[0].userId),e.setPatientName(t[0].sender))}}catch(i){}})()},[null===o||void 0===o?void 0:o._id]);const[H,U]=(0,l.useState)([]);(0,l.useEffect)(()=>{null!==o&&void 0!==o&&o._id&&(async()=>{try{var e;const t=null===(e=o._id)||void 0===e?void 0:e.toString();if(!t)return;const i=await p.A.get("".concat("","/user/chatlist/receiver/").concat(t));if(i.data.success){const e=i.data.chatList.map((e,t)=>({id:t+1,sender:(null===e||void 0===e?void 0:e.senderName)||"Unknown",email:(null===e||void 0===e?void 0:e.senderEmail)||"No email",image:(null===e||void 0===e?void 0:e.senderImage)||"/default-user.png"}));U(e)}}catch(t){}})()},[null===o||void 0===o?void 0:o._id]),(0,l.useEffect)(()=>{(async()=>{if(d&&null!==o&&void 0!==o&&o._id)try{const e=await fetch("".concat("","/doctor/patients"),{credentials:"include"}),t=await e.json();Array.isArray(t)&&b(t)}catch(e){}})()},[d,null===o||void 0===o?void 0:o._id]),(0,l.useEffect)(()=>{(async()=>{if(d)try{const e=await fetch("".concat("","/doctor/getAllDoctorProfileIdsInvite"),{credentials:"include"}),t=await e.json();if(t.success&&t.data&&Array.isArray(t.data)){const e=t.data.filter(e=>(e._id||e.id)!==((null===o||void 0===o?void 0:o._id)||(null===o||void 0===o?void 0:o.id)));A(e)}else A([])}catch(e){A([])}})()},[d,null===o||void 0===o?void 0:o._id]),(0,l.useEffect)(()=>{if(!w.trim())return C([]),void F(!1);const e=w.toLowerCase(),t=[];j.forEach(i=>{const l=((null===i||void 0===i?void 0:i.title)||"").toLowerCase(),n=((null===i||void 0===i?void 0:i.email)||"").toLowerCase(),a=((null===i||void 0===i?void 0:i.phone)||"").toLowerCase(),o=((null===i||void 0===i?void 0:i.uhiId)||(null===i||void 0===i?void 0:i.healthId)||"").toLowerCase();(l.includes(e)||n.includes(e)||a.includes(e)||o.includes(e))&&t.push((0,s.A)((0,s.A)({},i),{},{type:"patient",displayName:(null===i||void 0===i?void 0:i.title)||"Unknown Patient",identifier:(null===i||void 0===i?void 0:i.email)||(null===i||void 0===i?void 0:i.phone)||(null===i||void 0===i?void 0:i.uhiId)||(null===i||void 0===i?void 0:i.healthId)||""}))}),I.forEach(i=>{var l,n,a,o,d,r,c,u,m,v,p,f;const g=((null===i||void 0===i?void 0:i.fullName)||(null===i||void 0===i||null===(l=i.personalDetails)||void 0===l?void 0:l.fullName)||(null===i||void 0===i||null===(n=i.docRefId)||void 0===n?void 0:n.fullName)||"").toLowerCase(),h=((null===i||void 0===i?void 0:i.emailId)||(null===i||void 0===i||null===(a=i.personalDetails)||void 0===a?void 0:a.emailId)||(null===i||void 0===i||null===(o=i.docRefId)||void 0===o?void 0:o.emailId)||"").toLowerCase(),x=((null===i||void 0===i?void 0:i.mobileNumber)||(null===i||void 0===i||null===(d=i.personalDetails)||void 0===d?void 0:d.mobileNumber)||(null===i||void 0===i||null===(r=i.docRefId)||void 0===r?void 0:r.mobileNumber)||"").toLowerCase(),y=((null===i||void 0===i?void 0:i.doctorId)||(null===i||void 0===i||null===(c=i.personalDetails)||void 0===c?void 0:c.doctorId)||(null===i||void 0===i||null===(u=i.docRefId)||void 0===u?void 0:u.doctorId)||"").toLowerCase(),w=((null===i||void 0===i?void 0:i.hprId)||(null===i||void 0===i?void 0:i.hprRegistrationNumber)||(null===i||void 0===i||null===(m=i.personalDetails)||void 0===m?void 0:m.hprId)||(null===i||void 0===i||null===(v=i.personalDetails)||void 0===v?void 0:v.hprRegistrationNumber)||(null===i||void 0===i||null===(p=i.docRefId)||void 0===p?void 0:p.hprId)||(null===i||void 0===i||null===(f=i.docRefId)||void 0===f?void 0:f.hprRegistrationNumber)||"").toLowerCase();if(g.includes(e)||h.includes(e)||x.includes(e)||y.includes(e)||w.includes(e)){var N,j,b,I,A,S,C,D,R,E,k,P;const e=(null===i||void 0===i?void 0:i.fullName)||(null===i||void 0===i||null===(N=i.personalDetails)||void 0===N?void 0:N.fullName)||(null===i||void 0===i||null===(j=i.docRefId)||void 0===j?void 0:j.fullName)||"Unknown Doctor",l=(null===i||void 0===i?void 0:i.emailId)||(null===i||void 0===i||null===(b=i.personalDetails)||void 0===b?void 0:b.emailId)||(null===i||void 0===i||null===(I=i.docRefId)||void 0===I?void 0:I.emailId)||(null===i||void 0===i?void 0:i.mobileNumber)||(null===i||void 0===i||null===(A=i.personalDetails)||void 0===A?void 0:A.mobileNumber)||(null===i||void 0===i||null===(S=i.docRefId)||void 0===S?void 0:S.mobileNumber)||(null===i||void 0===i?void 0:i.doctorId)||(null===i||void 0===i||null===(C=i.personalDetails)||void 0===C?void 0:C.doctorId)||(null===i||void 0===i||null===(D=i.docRefId)||void 0===D?void 0:D.doctorId)||(null===i||void 0===i?void 0:i.hprId)||(null===i||void 0===i?void 0:i.hprRegistrationNumber)||(null===i||void 0===i||null===(R=i.personalDetails)||void 0===R?void 0:R.hprId)||(null===i||void 0===i||null===(E=i.personalDetails)||void 0===E?void 0:E.hprRegistrationNumber)||(null===i||void 0===i||null===(k=i.docRefId)||void 0===k?void 0:k.hprId)||(null===i||void 0===i||null===(P=i.docRefId)||void 0===P?void 0:P.hprRegistrationNumber)||"";t.push((0,s.A)((0,s.A)({},i),{},{type:"doctor",displayName:e,identifier:l}))}}),C(t),t.length>0||w.trim()?F(!0):F(!1)},[w,j,I]);const V=()=>{y(!1),N(""),R(null),k(!1),L(!1),C([]),F(!1)};return(0,x.jsxs)("div",{className:"".concat(!1===e.showList?"w-0":"w-full md:w-[26%]"," flex flex-col items-center overflow-hidden chat-sidebar rounded-l-xl"),style:{minHeight:"calc(100vh - 110px)"},children:[(0,x.jsxs)("div",{className:"mt-2 flex h-[70px] w-full flex-row items-center justify-between bg-white pl-2 pr-2",children:[e.showList&&(0,x.jsx)("div",{className:"ml-1 mt-4 flex h-10 w-10 cursor-pointer items-center justify-center rounded-full ".concat(e.showAddList?"":"bg-gray-300"),onClick:e.notebookClick,children:(0,x.jsx)(r.NXW,{className:"h-[30px] w-[30px] cursor-pointer items-start rounded-full ".concat(e.showAddList?"":"bg-gray-300"," text-black")})}),e.showList&&(0,x.jsx)("div",{onClick:e.handleAddChat,className:"mb-2 mr-1 mt-4 flex h-11 w-11 items-center justify-center rounded-full ".concat(e.showAddList?"bg-gray-300":""," cursor-pointer"),children:(0,x.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 35 37",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,x.jsx)("path",{d:"M19.0909 5.3V8.5H3.18182V29.916L5.98659 27.7H28.6364V16.5H31.8182V29.3C31.8182 29.7243 31.6506 30.1313 31.3522 30.4314C31.0539 30.7314 30.6492 30.9 30.2273 30.9H7.0875L0 36.5V6.9C0 6.47565 0.167613 6.06869 0.465966 5.76863C0.76432 5.46857 1.16897 5.3 1.59091 5.3H19.0909ZM27.0455 5.3V0.5H30.2273V5.3H35V8.5H30.2273V13.3H27.0455V8.5H22.2727V5.3H27.0455Z",fill:"#3E3E3E"})})})]}),(0,x.jsxs)("div",{className:"flex w-full flex-col items-center overflow-y-auto bg-white",style:{overflow:"scroll",scrollbarWidth:"none"},children:[(0,x.jsxs)("div",{className:"mt-2 flex h-[45px] w-[95%] flex-row items-center justify-center rounded-[5px] border p-1",children:[(0,x.jsx)("img",{src:i(62671),className:"ml-2 mr-2 h-[16px] w-[16px] text-[#CDCED0]"}),(0,x.jsx)("input",{className:"mb-1.5 w-full border-none text-start text-[14px]",type:"text",placeholder:"Search"})]}),(0,x.jsxs)("div",{className:"mt-2 flex h-[56px] w-full cursor-pointer items-center justify-start rounded-md px-3 hover:bg-gray-100",onClick:()=>{var t;B(!0),e.onSelectReceiver("chatbot"),e.setPatientName("Dr. Jii: Ai Assistant"),null===(t=e.setSelectedContactImage)||void 0===t||t.call(e,null)},children:[(0,x.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#63636340]",children:(0,x.jsx)(v.mYn,{className:"h-6 w-6 text-[#636363]"})}),(0,x.jsx)("span",{className:"ml-3 text-sm font-medium",children:"Dr. Jii: Ai Assistant"})]}),e.showAddList?(0,x.jsxs)("div",{className:"flex w-full flex-col items-start space-y-2",children:[(0,x.jsx)("div",{onClick:e.handleAddChat,className:"mt-2 flex cursor-pointer items-center justify-start px-3",children:(0,x.jsx)(m.JWD,{className:"h-8 w-6 text-[#636363]"})}),(0,x.jsxs)("div",{className:"flex h-[56px] cursor-pointer items-center justify-start rounded-md px-3",children:[(0,x.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#63636340]",children:(0,x.jsx)(r._lE,{className:"h-6 w-6 text-[#636363]"})}),(0,x.jsx)("span",{className:"ml-3 text-sm font-medium",children:"New space"})]}),(0,x.jsxs)("div",{className:"flex h-[56px] cursor-pointer items-center justify-start rounded-md px-3",children:[(0,x.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#63636340]",children:(0,x.jsx)(u.YOB,{className:"h-6 w-6 text-[#636363]"})}),(0,x.jsx)("span",{className:"ml-3 text-sm font-medium",children:"Message request"})]}),(0,x.jsxs)("div",{className:"flex h-[56px] cursor-pointer items-center justify-start rounded-md px-3",onClick:()=>y(!0),children:[(0,x.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#63636340]",children:(0,x.jsx)(c.Rzo,{className:"h-6 w-6 text-[#636363]"})}),(0,x.jsx)("span",{className:"ml-3 text-sm font-medium",children:"Invite to chat"})]})]}):(0,x.jsx)(x.Fragment,{children:n.map(t=>{var i,s;return(0,x.jsxs)("div",{onClick:()=>{var i;B(!1),e.onSelectReceiver(t.userId),e.setPatientName(t.sender),null===(i=e.setSelectedContactImage)||void 0===i||i.call(e,t.image)},className:"flex w-full cursor-pointer flex-row items-start justify-between p-4 hover:bg-gray-100 ".concat((null===(i=e.selectedReceiverId)||void 0===i?void 0:i.toString())===(null===(s=t.userId)||void 0===s?void 0:s.toString())?"bg-gray-100":""),children:[(0,x.jsx)("img",{src:null===t||void 0===t?void 0:t.image,className:"h-[40px] w-[40px] rounded-full"}),(0,x.jsxs)("div",{className:"ml-0 flex w-[65%] flex-col items-start",children:[(0,x.jsx)("span",{className:"text-[16px] text-[Gilroy-SemiBold] text-[black]",children:t.sender}),(0,x.jsx)("span",{className:"text-[12px] text-[#717171] text-[Gilroy-Medium]",children:t.text||"No messages yet"})]}),(0,x.jsx)("span",{className:"text-[12px] text-[#717171] text-[Gilroy-Medium]",children:t.timestamp?new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""})]},t.userId)})})]}),(0,x.jsx)(g.A,{isOpen:d,closeModal:V,title:"Invite professional or patient",width:"max-w-4xl",children:(0,x.jsxs)("div",{className:"min-h-[500px] space-y-4",children:[(0,x.jsx)("p",{className:"text-sm text-blue-600",children:"Via mail address, mobile number and professional id(HPR ID) or patient health id(UHI ID)"}),(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsxs)("div",{className:"flex items-center rounded-lg border border-gray-300 bg-white px-3 py-2",children:[(0,x.jsx)("img",{src:i(62671),className:"mr-2 h-4 w-4 text-gray-400",alt:"search"}),(0,x.jsx)("input",{type:"text",placeholder:"Enter Mail ID, No. & HPR or UHI ID",className:"w-full border-none text-sm text-gray-600 outline-none placeholder:text-sm placeholder:text-gray-400",value:w,onChange:e=>{N(e.target.value),F(!0)},onFocus:()=>{w&&S.length>0&&F(!0)},onBlur:()=>{setTimeout(()=>F(!1),200)}})]}),z&&w&&S.length>0&&(0,x.jsx)("div",{className:"invite-dropdown-scroll absolute z-10 mt-1 max-h-96 w-full overflow-y-auto rounded-md border border-gray-200 bg-white shadow-lg",children:S.map((t,i)=>{var s;const l=t._id||t.id,n=(null===D||void 0===D?void 0:D._id)||(null===D||void 0===D?void 0:D.id),d=D&&l&&n&&String(l)===String(n);return(0,x.jsxs)("div",{className:"flex cursor-pointer flex-row items-center gap-3 px-4 py-3 hover:bg-gray-100 ".concat(d?"bg-blue-50":""),onMouseDown:async i=>{if(i.preventDefault(),"doctor"===t.type){var s;const i=t._id||t.id,l=t.displayName||"Doctor",n=(null===t||void 0===t?void 0:t.image)||(null===t||void 0===t?void 0:t.doctorImage)||(null===t||void 0===t||null===(s=t.docRefId)||void 0===s?void 0:s.doctorImage)||"/default-user.png",d=await(async(t,i,s)=>{try{var l;const d=null===o||void 0===o||null===(l=o._id)||void 0===l?void 0:l.toString();if(!d)return void h.Ay.error("Cannot initialize chat. Please try again.");const r=await p.A.post("".concat("","/user/chat/initialize"),{senderId:d,receiverId:t,receiverType:"doctor"},{withCredentials:!0});if(r.data.success){var n;const l=async()=>{try{var e;const t=null===(e=o._id)||void 0===e?void 0:e.toString();if(!t)return;const i=await p.A.post("".concat("","/user/getAll"),{userId:t});if(i.data.success){const e=i.data.usersWithLastMessage.map((e,t)=>({id:t+1,userId:e.userId,sender:e.userName||"Unknown",text:e.lastMessage||"",image:e.userImage||"/default-user.png",timestamp:e.timestamp||(new Date).toISOString(),unreadCount:e.unreadCount||0}));a(e)}}catch(t){}};return await l(),e.onSelectReceiver(t),e.setPatientName(i),null===(n=e.setSelectedContactImage)||void 0===n||n.call(e,s),!0}return h.Ay.error(r.data.message||"Failed to initialize chat"),!1}catch(r){var d;const l={id:Date.now(),userId:t,sender:i,text:"",image:s||"/default-user.png",timestamp:(new Date).toISOString()};return a(e=>e.some(e=>e.userId&&e.userId.toString()===t.toString())?e:[l,...e]),e.onSelectReceiver(t),e.setPatientName(i),null===(d=e.setSelectedContactImage)||void 0===d||d.call(e,s),!1}})(i,l,n);V(),d&&h.Ay.success("Chat started with ".concat(l))}else R(t),F(!1),N("")},children:[(0,x.jsx)("img",{src:(null===t||void 0===t?void 0:t.image)||(null===t||void 0===t?void 0:t.doctorImage)||(null===t||void 0===t||null===(s=t.docRefId)||void 0===s?void 0:s.doctorImage)||"/default-user.png",alt:t.displayName,className:"h-10 w-10 rounded-full border border-gray-300 object-cover"}),(0,x.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,x.jsx)("h2",{className:"text-sm font-semibold",children:t.displayName}),(0,x.jsx)("p",{className:"text-xs text-gray-500",children:"doctor"===t.type?"Doctor":"Patient"}),(0,x.jsx)("p",{className:"text-xs text-gray-400",children:t.identifier})]}),d&&(0,x.jsx)("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-blue-600",children:(0,x.jsx)("span",{className:"text-xs text-white",children:"\u2713"})})]},i)})}),z&&w&&0===S.length&&(0,x.jsx)("div",{className:"absolute z-10 mt-1 w-full rounded-md border border-gray-200 bg-white p-4 shadow-lg",children:(0,x.jsx)("p",{className:"text-center text-sm text-gray-500",children:"No results found"})})]}),D&&(0,x.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-3",children:(0,x.jsxs)("div",{className:"flex items-center gap-3",children:[(0,x.jsx)("img",{src:(null===D||void 0===D?void 0:D.image)||(null===D||void 0===D||null===(t=D.docRefId)||void 0===t?void 0:t.doctorImage)||"/default-user.png",alt:D.displayName,className:"h-10 w-10 rounded-full border border-gray-300 object-cover"}),(0,x.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,x.jsx)("h3",{className:"text-sm font-semibold",children:D.displayName}),(0,x.jsx)("p",{className:"text-xs text-gray-500",children:"doctor"===D.type?"Doctor":"Patient"})]})]})}),(0,x.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Select channels:"}),(0,x.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,x.jsxs)("label",{className:"flex cursor-pointer items-center",children:[(0,x.jsx)("input",{type:"checkbox",checked:E,onChange:e=>k(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,x.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"Email"})]}),(0,x.jsxs)("label",{className:"flex cursor-pointer items-center",children:[(0,x.jsx)("input",{type:"checkbox",checked:P,onChange:e=>L(e.target.checked),className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,x.jsx)("span",{className:"ml-2 text-sm text-gray-700",children:"SMS"})]})]})]}),(0,x.jsx)("div",{className:"flex justify-end pt-4",children:(0,x.jsx)("button",{onClick:async()=>{if(D)if(E||P){M(!0);try{var e,t,i,s;const N=(null===o||void 0===o?void 0:o.fullName)||(null===o||void 0===o||null===(e=o.personalDetails)||void 0===e?void 0:e.fullName)||(null===o||void 0===o||null===(t=o.docRefId)||void 0===t?void 0:t.fullName)||"Doctor",j={recipientId:D._id||D.id,recipientType:D.type,recipientEmail:(null===D||void 0===D||null===(i=D.docRefId)||void 0===i?void 0:i.emailId)||(null===D||void 0===D?void 0:D.email)||"",recipientPhone:(null===D||void 0===D||null===(s=D.docRefId)||void 0===s?void 0:s.mobileNumber)||(null===D||void 0===D?void 0:D.phone)||"",recipientName:D.displayName,senderName:N,senderId:(null===o||void 0===o?void 0:o._id)||(null===o||void 0===o?void 0:o.id)||"",hprId:D.hprId||D.hprRegistrationNumber||"",uhiId:D.uhiId||D.healthId||""},b={withCredentials:!0,headers:{"Content-Type":"application/json"}},I=[];E&&I.push(p.A.post("".concat("","/doctor/send-chat-invitation/email"),j,b).then(e=>({type:"email",response:e})).catch(e=>({type:"email",error:e}))),P&&I.push(p.A.post("".concat("","/doctor/send-chat-invitation/sms"),j,b).then(e=>({type:"sms",response:e})).catch(e=>({type:"sms",error:e})));const A=await Promise.all(I),S=A.find(e=>"email"===e.type),C=A.find(e=>"sms"===e.type);let R=[],k=[];var l,n,a,d,r,c,u,m,v,f,g,x,y,w;if(S)if(null!==(l=S.response)&&void 0!==l&&null!==(n=l.data)&&void 0!==n&&n.success)R.push("Email invitation sent successfully!");else k.push((null===(a=S.error)||void 0===a||null===(d=a.response)||void 0===d||null===(r=d.data)||void 0===r?void 0:r.message)||(null===(c=S.response)||void 0===c||null===(u=c.data)||void 0===u?void 0:u.message)||"Failed to send email invitation");if(C)if(null!==(m=C.response)&&void 0!==m&&null!==(v=m.data)&&void 0!==v&&v.success)R.push("SMS invitation sent successfully!");else k.push((null===(f=C.error)||void 0===f||null===(g=f.response)||void 0===g||null===(x=g.data)||void 0===x?void 0:x.message)||(null===(y=C.response)||void 0===y||null===(w=y.data)||void 0===w?void 0:w.message)||"Failed to send SMS invitation");R.length>0&&R.forEach(e=>h.Ay.success(e)),k.length>0&&k.forEach(e=>h.Ay.error(e)),R.length>0?V():k.length>0&&h.Ay.error("Failed to send invitations. Please try again.")}catch(b){var N,j;h.Ay.error((null===(N=b.response)||void 0===N||null===(j=N.data)||void 0===j?void 0:j.message)||"Failed to send invite. Please try again.")}finally{M(!1)}}else h.Ay.error("Please select at least one channel (Email or SMS)");else h.Ay.error("Please select a recipient")},disabled:!D||!E&&!P||T,className:"rounded-lg px-6 py-2 font-medium text-white ".concat(!D||!E&&!P||T?"cursor-not-allowed bg-gray-400":"bg-blue-600 hover:bg-blue-700"),children:T?"Sending...":"Send Invite"})})]})})]})},N=e=>{const[t,i]=(0,l.useState)(""),[n,d]=(0,l.useState)([]),[c,m]=(0,l.useState)(""),[g,w]=(0,l.useState)(null),[N,j]=(0,l.useState)(null),[b,I]=(0,l.useState)(1),[A,S]=(0,l.useState)(!0),[C,D]=(0,l.useState)(!1),[R,E]=(0,l.useState)(null),[k,P]=(0,l.useState)(!1),[L,T]=(0,l.useState)(!1),M=(0,l.useRef)(null),z=(0,l.useRef)(null),F=(0,l.useRef)(null),_=(0,l.useRef)(null),B=(0,l.useRef)(null),H=(0,l.useRef)({}),U=(0,l.useRef)(e.selectedReceiverId),V=(0,l.useRef)(e.patientName),W=(0,l.useRef)(null),Y=(0,l.useRef)(new Set),J=(0,l.useRef)(!1),{doctor:O}=(0,f.S)();(0,l.useEffect)(()=>{U.current=e.selectedReceiverId,V.current=e.patientName},[e.selectedReceiverId,e.patientName]),(0,l.useEffect)(()=>{W.current=O},[O]),(0,l.useEffect)(()=>{const t="chatbot"===e.selectedReceiverId;if(P(t),t){const e={id:"welcome-".concat(Date.now()),sender:"Dr. Jii: Ai Assistant",text:"Hello! I'm Dr. Jii: Ai Assistant. How can I assist you today? You can ask me about medical information, appointments, or general questions.",timestamp:(new Date).toISOString(),image:null};d([e])}},[e.selectedReceiverId]),(0,l.useEffect)(()=>{if(null===O||void 0===O||!O._id)return;i(O._id);const e=()=>{var e;const t=null===(e=O._id)||void 0===e?void 0:e.toString();t&&y.connected&&y.emit("registerUser",t)},t=()=>{e()};y.on("connect",t),y.connected?e():y.disconnected&&y.connect();const l=e=>{var t,i,s,l,n;const a=U.current,o=V.current,r=W.current;if("chatbot"===a)return;if(null===r||void 0===r||!r._id)return;const c=null===(t=e.senderProfileId||e.senderId||e.sender)||void 0===t?void 0:t.toString(),u=(null===(i=e.receiverProfileId||e.receiverId||e.receiver)||void 0===i||i.toString(),e.message||e.text||e.content||""),m=e.image||e.imageUrl||null,v=e.messageId||e._id||e.id;if(!c||!u&&!m)return;const p=r._id.toString(),f=null===a||void 0===a?void 0:a.toString(),g=v||"".concat(Date.now(),"-").concat(c,"-").concat(Math.random().toString(36).substr(2,9));if(Y.current.has(g))return;if(c===p)return;if(!(f&&f===c))return;let h=e.fileType||(null===(s=e.imageMetadata)||void 0===s?void 0:s.fileType);if(!h&&m){const e=m.toLowerCase();h=e.includes(".pdf")||e.endsWith(".pdf")?"application/pdf":e.includes(".png")||e.endsWith(".png")?"image/png":e.includes(".jpg")||e.includes(".jpeg")||e.endsWith(".jpg")||e.endsWith(".jpeg")?"image/jpeg":e.includes(".gif")||e.endsWith(".gif")?"image/gif":e.includes(".webp")||e.endsWith(".webp")?"image/webp":"image/jpeg"}const x=e.fileName||(null===(l=e.imageMetadata)||void 0===l?void 0:l.originalFileName),y=e.fileSize||(null===(n=e.imageMetadata)||void 0===n?void 0:n.fileSize),w={id:g,sender:o,text:u||"",timestamp:e.timestamp||e.createdAt||(new Date).toISOString(),image:m||e.imageUrl||null,file:m||e.imageUrl||e.file||null,fileType:h,fileName:x||("application/pdf"===h?"Document.pdf":null),fileSize:y||null,seen:e.seen||!1,senderId:c};Y.current.add(g),d(e=>e.some(e=>e.id===w.id)?e:[...e,w])};y.on("receiveMessage",e=>{l(e)}),y.on("disconnect",()=>{}),y.on("reconnect",()=>{var e;const t=null===(e=O._id)||void 0===e?void 0:e.toString();t&&y.emit("registerUser",t)}),y.on("connect_error",e=>{"TransportError"===e.type&&(y.io.opts.transports=["polling"],y.disconnect(),setTimeout(()=>{y.connect()},1e3))});const n=e=>{const{messageId:t,receiverId:i,seenAt:l}=e;if(!t)return;const n=t.toString();d(e=>e.map(e=>{var t;return(null===(t=e.id)||void 0===t?void 0:t.toString())===n?(0,s.A)((0,s.A)({},e),{},{seen:!0}):e}))};return y.on("messageSeen",n),()=>{y.off("receiveMessage",l),y.off("connect",t),y.off("disconnect"),y.off("reconnect"),y.off("connect_error"),y.off("messageSeen",n)}},[null===O||void 0===O?void 0:O._id]);const G=(0,l.useRef)(new Set);(0,l.useEffect)(()=>{if(!B.current||"chatbot"===e.selectedReceiverId)return;const i=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const i=e.target.getAttribute("data-message-id"),l=e.target.getAttribute("data-sender-id"),n="true"===e.target.getAttribute("data-seen");!i||l===t||n||G.current.has(i)||(G.current.add(i),(async e=>{if(e&&t)try{(await p.A.put("".concat("","/user/message/").concat(e,"/seen"),{},{withCredentials:!0,headers:{"Content-Type":"application/json"}})).data.success&&d(t=>t.map(t=>t.id===e?(0,s.A)((0,s.A)({},t),{},{seen:!0}):t))}catch(i){}})(i))}})},{root:B.current,rootMargin:"0px",threshold:.5});return Object.values(H.current).forEach(e=>{e&&i.observe(e)}),()=>{i.disconnect()}},[n,t,e.selectedReceiverId]);const Q=function(e,t){if(!e||!e.includes("cloudinary.com"))return void h.Ay.error("Invalid file source. Only Cloudinary URLs are allowed.");let i=e;if(e.includes("/upload/")){const t=e.split("/upload/");2===t.length&&(i="".concat(t[0],"/upload/fl_attachment/").concat(t[1]))}const s=document.createElement("a");s.href=i,s.download=t||"attachment",s.target="_blank",s.rel="noopener noreferrer",s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s)},X=async function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const s=e.selectedReceiverId;if(t&&s&&"chatbot"!==s&&(!J.current||1!==i))try{D(!0);const l=await p.A.post("".concat("","/user/all/").concat(s),{senderId:t},{params:{page:i,limit:1===i?50:10},withCredentials:!0}),n=e=>{if(!e)return null;if(e.startsWith("data:")){const t=e.match(/^data:(.+);base64,/);return t?t[1]:"image/jpeg"}const t=e.toLowerCase();return t.includes(".pdf")?"application/pdf":t.includes(".png")?"image/png":t.includes(".jpg")||t.includes(".jpeg")?"image/jpeg":t.includes(".gif")?"image/gif":t.includes(".webp")?"image/webp":"image/jpeg"},a=l.data.messages.map(i=>{const s=n(i.image);return{id:i._id,sender:i.senderId===t?O.fullName:e.patientName,text:i.message||"",image:i.image||null,file:i.image||null,fileType:s,fileName:i.fileName||(i.image&&"application/pdf"===s?"Document.pdf":null),fileSize:i.fileSize||null,timestamp:i.createdAt,seen:i.seen||!1,senderId:i.senderId}});if(a.length>0){const e=a[a.length-1];E(e.id)}d(1===i?e=>{const t=new Set(a.map(e=>e.id)),i=e.filter(e=>!t.has(e.id));return[...a,...i].sort((e,t)=>new Date(e.timestamp)-new Date(t.timestamp))}:e=>{const t=new Set(e.map(e=>e.id));return[...a.filter(e=>!t.has(e.id)),...e]}),S(i<l.data.pagination.totalPages),I(i)}catch(l){}finally{D(!1)}},q=async()=>{if(!c.trim()&&!g)return;const t=(new Date).toISOString(),i=null===O||void 0===O?void 0:O._id,s=e.selectedReceiverId;if(!i||!s)return void h.Ay.error("Cannot send message. Missing sender or receiver information.");const l=c.trim();if("chatbot"===s){const e={id:"user-".concat(Date.now()),sender:O.fullName,text:l,image:g||null,file:g||null,fileType:(null===N||void 0===N?void 0:N.type)||null,fileName:(null===N||void 0===N?void 0:N.name)||null,fileSize:(null===N||void 0===N?void 0:N.size)||null,timestamp:t};d(t=>[...t,e]),m(""),w(null),j(null);const i=await(async e=>{T(!0);try{const t=await p.A.post("".concat("","/chatbot/message"),{message:e,userId:null===O||void 0===O?void 0:O._id,context:"medical_assistant"},{withCredentials:!0,headers:{"Content-Type":"application/json"}});return await new Promise(e=>setTimeout(e,1e3)),t.data&&t.data.response?t.data.response:"I'm sorry, I didn't understand that. Could you please rephrase your question?"}catch(t){return"I'm having trouble processing your request right now. Please try again in a moment."}finally{T(!1)}})(l),s={id:"bot-".concat(Date.now()),sender:"Dr. Jii: Ai Assistant",text:i,timestamp:(new Date).toISOString(),image:null};return void d(e=>[...e,s])}J.current=!0;const n=l,a=g,o=N;m(""),w(null),j(null);try{var r,u,v,f;y.connected||(y.connect(),await new Promise(e=>setTimeout(e,500)));const e=null===(r=O._id)||void 0===r?void 0:r.toString();if(!e)return void h.Ay.error("Cannot send message. Please refresh and try again.");y.emit("registerUser",e);const c=null===(u=O._id)||void 0===u?void 0:u.toString();if(g){const e=g.length,t=Math.round(3*e/4);if(t>3145728)return void h.Ay.error("File is too large to send. Please use a smaller file (max 3MB).")}const m=await p.A.post("".concat("","/user/send/").concat(s),{senderId:c,message:l,image:g||null,fileType:(null===N||void 0===N?void 0:N.type)||null,fileName:(null===N||void 0===N?void 0:N.name)||null,fileSize:(null===N||void 0===N?void 0:N.size)||null},{withCredentials:!0,maxContentLength:1/0,maxBodyLength:1/0}),x=(null===(v=m.data)||void 0===v?void 0:v.newMessage)||(null===(f=m.data)||void 0===f?void 0:f.message);if(null!==x&&void 0!==x&&x._id){const e=x._id.toString(),s={id:e,sender:O.fullName,text:n,image:x.image||a||null,file:x.image||a||null,fileType:(null===o||void 0===o?void 0:o.type)||null,fileName:x.fileName||(null===o||void 0===o?void 0:o.name)||null,fileSize:x.fileSize||(null===o||void 0===o?void 0:o.size)||null,timestamp:x.createdAt||t,seen:x.seen||!1,senderId:x.senderId||i};d(t=>t.some(t=>t.id===e)?t:[...t,s])}else h.Ay.error("Failed to send message. Please try again.")}catch(x){h.Ay.error("Failed to send message. Please try again.")}finally{setTimeout(()=>{J.current=!1},1e3)}};(0,l.useEffect)(()=>{const e=()=>{const e=B.current;if(e&&!C&&A&&0===e.scrollTop){const t=e.scrollHeight;X(b+1).then(()=>{setTimeout(()=>{const i=e.scrollHeight;e.scrollTop=i-t},100)})}},t=B.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}},[b,C,A]);return(0,l.useEffect)(()=>{(()=>{var e;null===(e=F.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[n]),(0,l.useEffect)(()=>{R&&H.current[R]&&H.current[R].scrollIntoView({behavior:"smooth",block:"start"})},[R,n]),(0,l.useEffect)(()=>{if(t&&e.selectedReceiverId){if("chatbot"===e.selectedReceiverId)return I(1),void S(!1);G.current.clear(),d([]),I(1),S(!0),X(1)}},[t,e.selectedReceiverId]),(0,x.jsxs)("div",{className:"container",children:[(0,x.jsxs)("div",{className:"top-border",children:[(0,x.jsxs)("div",{className:"flex flex-row items-center",children:[!1===e.showList&&(0,x.jsx)("div",{onClick:e.notebookClick,children:(0,x.jsx)(r.NXW,{className:"h-[30px] w-[30px] cursor-pointer text-black"})}),k?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"ml-4 flex h-10 w-10 items-center justify-center rounded-full bg-blue-100",children:(0,x.jsx)(v.p50,{className:"h-6 w-6 text-blue-600"})}),(0,x.jsx)("h6",{className:"pl-4 text-[20px] text-[Gilroy-SemiBold] text-[black]",children:"Dr. Jii: Ai Assistant"})]}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("h6",{className:"pl-4 text-[20px] text-[Gilroy-SemiBold] text-[black]",children:e.patientName||"Chat"}),(0,x.jsx)(o.Vr3,{className:"ml-4 h-[16px] w-[16px]"})]})]}),!k&&e.selectedReceiverId&&(0,x.jsx)("img",{src:e.selectedContactImage||"/default-user.png",className:"h-[40px] w-[40px] rounded-full",alt:e.patientName})]}),(0,x.jsxs)("div",{className:"message-container",ref:B,children:[C&&(0,x.jsx)("div",{className:"mt-2 text-center text-sm text-gray-500",children:"Loading..."}),(0,x.jsx)("div",{ref:_}),null===n||void 0===n?void 0:n.map((i,s)=>{var a;const o=i.sender===O.fullName,d="Dr. Jii: Ai Assistant"===i.sender,r=new Date(i.timestamp),c=s>0?new Date(n[s-1].timestamp):null,m=!c||r.toDateString()!==c.toDateString();return(0,x.jsxs)(l.Fragment,{children:[m&&(0,x.jsx)("div",{className:"my-4 flex justify-center",children:(0,x.jsx)("span",{className:"rounded-full bg-gray-300 px-4 py-1 text-xs text-gray-700",children:(e=>{const t=new Date,i=new Date;return i.setDate(t.getDate()-1),e.toDateString()===t.toDateString()?"Today":e.toDateString()===i.toDateString()?"Yesterday":e.toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})})(r)})}),(0,x.jsxs)("div",{className:"message-group ".concat(o?"sent":"received"),children:[(0,x.jsxs)("div",{ref:e=>{H.current[i.id]=e},"data-message-id":i.id,"data-sender-id":i.senderId||(o?t:null),"data-seen":i.seen?"true":"false",className:"message ".concat(o?"sent-message":"received-message"," ").concat(d?"bot-message":""),children:[!o&&(0,x.jsxs)("p",{className:"message-sender",children:[d?"Dr. Jii":e.patientName,d&&(0,x.jsx)("span",{className:"ai-badge",children:"AI Assistant"})]}),i.text&&(0,x.jsx)("p",{className:"message-text",children:i.text}),(i.image||i.file)&&(0,x.jsxs)("div",{className:"relative mt-2 inline-block",children:[i.image&&((null===(a=i.fileType)||void 0===a?void 0:a.startsWith("image/"))||!i.fileType||"application/pdf"!==i.fileType)&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("img",{src:i.image,alt:"Sent",className:"uploaded-image"}),(0,x.jsxs)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation();let t="jpg",s="image/jpeg";if(i.fileType)s=i.fileType,t=i.fileType.split("/")[1]||"jpg";else if(i.image){const e=i.image.toLowerCase();e.includes(".png")||e.includes("/png")?(t="png",s="image/png"):e.includes(".gif")||e.includes("/gif")?(t="gif",s="image/gif"):(e.includes(".webp")||e.includes("/webp"))&&(t="webp",s="image/webp")}Q(i.image,"attachment-".concat(i.id,".").concat(t),s)},className:"download-button absolute bottom-2 left-2",title:"Download image",children:[(0,x.jsx)(u.eCm,{className:"h-4 w-4"}),"Download"]})]}),"application/pdf"===i.fileType&&(0,x.jsxs)("div",{className:"pdf-preview",children:[(0,x.jsx)("div",{className:"pdf-icon",children:(0,x.jsx)("svg",{className:"h-full w-full text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}),(0,x.jsxs)("div",{className:"pdf-info",children:[(0,x.jsx)("p",{className:"pdf-name",children:i.fileName||"Document.pdf"}),i.fileSize&&(0,x.jsxs)("p",{className:"pdf-size",children:[(i.fileSize/1024/1024).toFixed(2)," MB"]})]}),(0,x.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),Q(i.image||i.file,i.fileName||"attachment-".concat(i.id,".pdf"),i.fileType||"application/pdf")},className:"download-button",title:"Download file",children:(0,x.jsx)(u.eCm,{className:"h-4 w-4"})})]})]})]}),(0,x.jsxs)("div",{className:"message-status",children:[(0,x.jsx)("span",{className:"message-timestamp",children:i.timestamp?new Date(i.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):""}),o&&(0,x.jsx)("span",{className:"status-icon status-".concat(i.seen?"seen":"sent"),children:i.seen?"\u2713\u2713":"\u2713"})]})]})]},i.id)}),L&&k&&(0,x.jsx)("div",{className:"message-group received",children:(0,x.jsxs)("div",{className:"message received-message bot-message",children:[(0,x.jsx)("p",{className:"message-sender",children:"Dr. Jii: Ai Assistant"}),(0,x.jsxs)("div",{className:"typing-indicator",children:[(0,x.jsx)("div",{className:"typing-dot"}),(0,x.jsx)("div",{className:"typing-dot"}),(0,x.jsx)("div",{className:"typing-dot"})]})]})}),!C&&!k&&0===n.length&&(0,x.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,x.jsxs)("div",{className:"text-center",children:[(0,x.jsx)("p",{className:"text-gray-500",children:"No messages yet"}),(0,x.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Start a conversation with ",e.patientName]})]})}),(0,x.jsx)("div",{ref:F})]}),(0,x.jsxs)("div",{className:"flex-shrink-0 bg-gradient-to-b from-transparent to-transparent px-4 pb-4",children:[g&&N&&(0,x.jsxs)("div",{className:"file-preview-wrapper",children:[N.isImage&&(0,x.jsxs)("div",{className:"image-preview",children:[(0,x.jsx)("img",{src:g,alt:"Preview"}),(0,x.jsx)("button",{onClick:()=>{w(null),j(null),z.current&&(z.current.value="")},className:"file-remove-btn",title:"Remove file",type:"button",children:"\xd7"})]}),N.isPdf&&(0,x.jsxs)("div",{className:"pdf-preview",children:[(0,x.jsx)("div",{className:"pdf-icon",children:(0,x.jsx)("svg",{className:"h-full w-full text-red-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,x.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})})}),(0,x.jsxs)("div",{className:"pdf-info",children:[(0,x.jsx)("p",{className:"pdf-name",children:N.name}),(0,x.jsxs)("p",{className:"pdf-size",children:[(N.size/1024/1024).toFixed(2)," MB"]})]}),(0,x.jsx)("button",{onClick:()=>{w(null),j(null),z.current&&(z.current.value="")},className:"pdf-remove-btn",title:"Remove file",type:"button",children:"\xd7"})]})]}),(0,x.jsxs)("div",{className:"input-container",children:[(0,x.jsx)("button",{type:"button",onClick:()=>z.current.click(),className:"attachment-button",title:"Attach file",children:(0,x.jsx)(a.Mqx,{className:"h-6 w-6"})}),(0,x.jsx)("input",{ref:M,className:"input",placeholder:"Type a message...",value:c,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),q())}}),(0,x.jsx)("input",{type:"file",ref:z,style:{display:"none"},accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp,application/pdf",onChange:async e=>{const t=e.target.files[0];if(!t)return;const i=["image/jpeg","image/jpg","image/png","image/gif","image/webp"],s="application/pdf";if(![...i,s].includes(t.type))return h.Ay.error("File type not supported. Please select an image (JPG, PNG, GIF, WEBP) or PDF."),void(e.target.value="");const l=t.type===s;if(l&&t.size>52428800)return h.Ay.error("PDF file size too large. Maximum size is 50MB."),void(e.target.value="");if(!l&&t.size>52428800)return h.Ay.error("Image file size too large. Maximum size is 50MB."),void(e.target.value="");const n={name:t.name,type:t.type,size:t.size,isImage:i.includes(t.type),isPdf:l};j(n);try{const e=await new Promise((e,i)=>{const s=new FileReader;s.onloadend=()=>e(s.result),s.onerror=i,s.readAsDataURL(t)});w(e),setTimeout(()=>{var e;null===(e=F.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},100)}catch(a){h.Ay.error("Error processing file. Please try again."),e.target.value="",j(null)}}}),(0,x.jsx)("button",{type:"button",onClick:q,disabled:!c.trim()&&!g,className:"send-button",title:"Send message",children:(0,x.jsx)(a.JpO,{className:"h-5 w-5"})})]})]})]})},j=()=>{const[e,t]=(0,l.useState)(!0),[i,s]=(0,l.useState)(!1),[a,o]=(0,l.useState)("chatbot"),[d,r]=(0,l.useState)("Dr. Jii: Ai Assistant"),[c,u]=(0,l.useState)(null),m=()=>{t(!e)};return(0,x.jsx)(n.A,{children:(0,x.jsxs)("div",{className:"flex h-full flex-row items-start justify-between overflow-hidden",style:{maxHeight:"calc(120vh - 20px)"},children:[(0,x.jsx)(w,{notebookClick:m,showList:e,showAddList:i,handleAddChat:()=>{s(!i)},onSelectReceiver:o,setPatientName:r,setSelectedContactImage:u,selectedReceiverId:a}),(0,x.jsx)(N,{notebookClick:m,showList:e,selectedReceiverId:a,patientName:d,selectedContactImage:c})]})})}},57939:()=>{},62671:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgB7ZiNUeMwEIXfUUE6OHWAOzh3cNcBKsEdXAm4A6cD7ipwqAA6ACoIHYB2ogye1Ur+WynA+Jt5E8uWd7XSSrEEbGxsfGl+YD3G6Y/TtVPttPMiXp2eve6d/vnrT4F16p3eZurBv3sxaqcnzG84F9mwKAilxS3WN5zrFh8plw2D09DHGtE7NU4Vawxd1/5Zj/RoGGTCIJ4yHeY5prp7FAxiB7nxdK+KvHPjdPT16Pc8OmZQx0TsPkA5naSc3484iY0WHzGycQd5TqhgBeN3E947Ij1p6XkzqL8X6tRQgPcklacMr8W0Zfavr7+L+FqFFRwazKdCOqBmUI8/s1gBXzI7rIcay9OLysY/3yNcmhdhoNP7EtTTPIg+4fcnFtBAqScm2ied51YPOcWiXAn3frHyf+jSOh3YvSbi6xojSAEYVn6EPryh5047sPs1FsBzNMeHloG8bO4QTvIk0obmbUIdDWJ+Zvm/wuV4HVw/Q5ESKURYnFLniI8/rdkpJPHEjFQoR43w6zSJlEL3gtFS8M56GXtBCoAvm79RDu7rgAUY5PuUKOaX/6V3yE+HmfmfwiLsjZyT2UD5c5rgqxGVcyypWTY0RI2wV3KkkrQvtlCiFYyTQ42RIBudYL+FIuREOtCiITZYToXxbaYaBroHW13E1lA3UMYgfdLQ49RzNcKjxQrjR4tFgqDGtDMbMUUt5G1mliAIC73j9ZrZLRbE2WHqxDqVbjZhs2gQhMEpBWh5pYCG+wm6pp7uEB7wxrC4QBDaWHzTIBbt0C6JRTjxvxwW4d55Y2PD8w7hLdlsQSU2FgAAAABJRU5ErkJggg=="}}]);