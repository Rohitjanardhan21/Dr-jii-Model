"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[91],{60091:(e,s,t)=>{t.r(s),t.d(s,{default:()=>p});var a=t(9950),l=t(31222),i=t(35887),c=t(39174),r=t(17340),n=t(38613),d=t(28429),o=t(89379),m=t(58644),x=t(22535),u=(t(82842),t(70066),t(44414));const h=function(e){let{closeModal:s,isOpen:l,doctor:r,datas:d}=e;const[h,p]=(0,a.useState)(x.Ud.type[0]),[f,b]=(0,a.useState)(x.Ud.invitation[0]),[g,N]=(0,a.useState)({}),[y,j]=(0,a.useState)({fullName:"",emailId:"",mobileNumber:"",businessName:"",businessTitle:"",facilityId:""}),[A,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{console.log("instruction2:",f)},[]);const w=(e,s)=>{j(t=>(0,o.A)((0,o.A)({},t),{},{[e]:s}))};return(0,u.jsxs)(m.A,{closeModal:s,isOpen:l,title:"Add Facility",width:"max-w-3xl",children:[(0,u.jsxs)("div",{className:"mb-6 mt-8 flex h-[45px] w-[70%] flex-row items-center justify-center rounded-[5px] bg-[#F8F9FA] p-1",children:[(0,u.jsx)("img",{src:t(62671),className:"ml-2 mr-2 h-[16px] w-[16px] text-[#CDCED0]"}),(0,u.jsx)("input",{className:"w-full bg-[#F8F9FA] text-start text-[14px]",type:"text",placeholder:"Search"})]}),(0,u.jsxs)("div",{className:"mb-4 grid w-full gap-4 sm:grid-cols-2",children:[(0,u.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,u.jsx)("p",{className:"text-sm text-black",children:"Invitation for"}),(0,u.jsx)(n.l6,{selectedPerson:f,setSelectedPerson:b,datas:x.Ud.invitation,children:(0,u.jsxs)("div",{className:"flex-btn w-full rounded-lg border border-border p-4 text-sm font-light text-textGray focus:border focus:border-subMain",children:[f.name," ",(0,u.jsx)(c.nwe,{className:"text-xl"})]})})]}),(0,u.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,u.jsx)("p",{className:"text-sm text-black",children:"Facility type"}),(0,u.jsx)(n.l6,{selectedPerson:h,setSelectedPerson:p,datas:x.Ud.type,children:(0,u.jsxs)("div",{className:"flex-btn w-full rounded-lg border border-border p-4 text-sm font-light text-textGray focus:border focus:border-subMain",children:[h.name," ",(0,u.jsx)(c.nwe,{className:"text-xl"})]})})]})]}),(0,u.jsxs)("div",{className:"flex-colo gap-6",children:[(0,u.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,u.jsx)(n.pd,{label:"Full Name",color:!0,placeholder:"Enter full name",value:y.fullName,onChange:e=>w("fullName",e.target.value)}),(0,u.jsx)(n.pd,{label:"Business Name",color:!0,placeholder:"Enter business name",value:y.businessName,onChange:e=>w("businessName",e.target.value)})]}),"Partnership"==f.name&&(0,u.jsx)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:(0,u.jsx)(n.pd,{label:"Facility ID",color:!0,placeholder:"Enter facility ID",value:y.facilityId,onChange:e=>w("facilityId",e.target.value)})}),(0,u.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,u.jsx)(n.pd,{label:"Mobile number",placeholder:"Enter mobile no.",color:!0,type:"tel",value:y.mobileNumber,onChange:e=>w("mobileNumber",e.target.value),required:!0}),(0,u.jsx)(n.pd,{label:"Email",placeholder:"Enter your Email",color:!0,type:"email",value:y.emailId,onChange:e=>w("emailId",e.target.value),required:!0})]}),(0,u.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,u.jsx)("button",{onClick:s,className:"rounded-lg bg-[#B8B8B8] p-4 text-sm font-light text-[white]",children:"Cancel"}),(0,u.jsx)(n.$n,{label:A?"Inviting...":"Invite",onClick:async()=>{if(y.emailId&&y.mobileNumber)if("Partnership"!==f.name||y.facilityId){v(!0);try{const e={fullName:y.fullName||y.businessName||y.emailId.split("@")[0],emailId:y.emailId.trim(),mobileNumber:Number(y.mobileNumber),businessName:y.businessName||y.emailId.split("@")[0],businessTitle:h.name||""},t=await fetch("".concat("","/facility/facilityProfile"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),a=await t.json();t.ok&&a.message?(i.oR.success(a.message||"Facility invited successfully"),j({fullName:"",emailId:"",mobileNumber:"",businessName:"",businessTitle:"",facilityId:""}),s()):i.oR.error(a.message||"Failed to invite facility")}catch(e){console.error("Error inviting facility:",e),i.oR.error("Failed to invite facility. Please try again.")}finally{v(!1)}}else i.oR.error("Please fill in facility ID for partnership");else i.oR.error("Please fill in email and mobile number")},disabled:A})]})]})]})};const p=function(){const[e,s]=a.useState(!1),[t,o]=(0,a.useState)([]),[m,x]=(0,a.useState)([]),[p,f]=(0,a.useState)(""),[b,g]=((0,d.Zp)(),(0,a.useState)(!0)),N=async()=>{try{g(!0);const e=await fetch("".concat("","/facility/getAll/facilityProfile"),{credentials:"include"}),s=await e.json();s.data?(o(s.data),x(s.data)):(o([]),x([]))}catch(e){console.log("error fetching...",e),i.oR.error("Failed to fetch facilities"),o([]),x([])}finally{g(!1)}};return(0,a.useEffect)(()=>{N()},[]),(0,a.useEffect)(()=>{if(p){const e=t.filter(e=>{var s,t,a,l;return(null===(s=e.fullName)||void 0===s?void 0:s.toLowerCase().includes(p.toLowerCase()))||(null===(t=e.businessName)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))||(null===(a=e.emailId)||void 0===a?void 0:a.toLowerCase().includes(p.toLowerCase()))||(null===(l=e.mobileNumber)||void 0===l?void 0:l.toString().includes(p))});x(e)}else x(t)},[p,t]),b?(0,u.jsx)(r.A,{children:(0,u.jsx)("div",{className:"bg-gray-50 p-6 min-h-[200px] flex items-center justify-center"})}):(0,u.jsxs)(r.A,{children:[e&&(0,u.jsx)(h,{closeModal:()=>{s(!1),N()},isOpen:e,datas:null}),(0,u.jsxs)("div",{className:"mb-6 flex flex-row items-end",children:[(0,u.jsx)("h1",{className:"text-[38px] font-[600] text-black",children:"avijo"}),(0,u.jsx)("h6",{className:"text-[24px] font-[500] italic text-[#FD7979]",children:"Expert"})]}),(0,u.jsxs)("div",{className:"my-8 rounded-xl border-[1px] border-border bg-white p-5",children:[(0,u.jsxs)("div",{className:"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[(0,u.jsx)("input",{type:"text",placeholder:"Search facilities...",value:p,onChange:e=>f(e.target.value),className:"h-14 w-full rounded-md border border-border bg-dry px-4 text-sm text-main sm:max-w-md"}),(0,u.jsxs)("div",{className:"flex gap-4",children:[(0,u.jsx)(n.$n,{label:"Export",Icon:l.Hm5,onClick:()=>{if(0===m.length)return void i.oR.error("No data to export");const e=[["Name","Business Name","Email","Mobile","City","State"],...m.map(e=>[e.fullName||"",e.businessName||"",e.emailId||"",e.mobileNumber||"",e.cityDistrict||"",e.state||""])].map(e=>e.map(e=>'"'.concat(e,'"')).join(",")).join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="facilities-".concat((new Date).toISOString().split("T")[0],".csv"),a.click(),i.oR.success("Facilities exported successfully")}}),(0,u.jsx)(n.$n,{label:"Invite Facility",Icon:c.Ca6,onClick:()=>s(!0)})]})]}),(0,u.jsx)("div",{className:"mt-4 w-full overflow-x-auto",children:0===m.length?(0,u.jsx)("div",{className:"text-center py-10 text-gray-500",children:p?"No facilities found matching your search":"No facilities found. Invite a facility to get started."}):(0,u.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,u.jsx)("thead",{className:"bg-gray-100 text-gray-600 uppercase text-xs",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"px-6 py-3",children:"#"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"Name"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"Business Name"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"Email"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"Mobile"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"City"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"State"}),(0,u.jsx)("th",{className:"px-6 py-3",children:"Status"})]})}),(0,u.jsx)("tbody",{children:m.map((e,s)=>(0,u.jsxs)("tr",{className:"border-t hover:bg-gray-50",children:[(0,u.jsx)("td",{className:"px-6 py-4",children:s+1}),(0,u.jsx)("td",{className:"px-6 py-4 text-gray-800",children:e.fullName||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.businessName||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.emailId||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.mobileNumber||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.cityDistrict||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:e.state||"N/A"}),(0,u.jsx)("td",{className:"px-6 py-4",children:(0,u.jsx)("span",{className:"rounded-full px-3 py-1 text-xs ".concat(e.verifyStatus?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.verifyStatus?"Verified":"Pending"})})]},e._id||e.id))})]})}),m.length>0&&(0,u.jsx)("div",{className:"mt-4 flex justify-between items-center px-6 py-3 text-sm text-gray-600",children:(0,u.jsxs)("div",{children:["Showing ",m.length," of ",t.length," facilities"]})})]})]})}},62671:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAxCAYAAACcXioiAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJdSURBVHgB7ZiNUeMwEIXfUUE6OHWAOzh3cNcBKsEdXAm4A6cD7ipwqAA6ACoIHYB2ogye1Ur+WynA+Jt5E8uWd7XSSrEEbGxsfGl+YD3G6Y/TtVPttPMiXp2eve6d/vnrT4F16p3eZurBv3sxaqcnzG84F9mwKAilxS3WN5zrFh8plw2D09DHGtE7NU4Vawxd1/5Zj/RoGGTCIJ4yHeY5prp7FAxiB7nxdK+KvHPjdPT16Pc8OmZQx0TsPkA5naSc3484iY0WHzGycQd5TqhgBeN3E947Ij1p6XkzqL8X6tRQgPcklacMr8W0Zfavr7+L+FqFFRwazKdCOqBmUI8/s1gBXzI7rIcay9OLysY/3yNcmhdhoNP7EtTTPIg+4fcnFtBAqScm2ied51YPOcWiXAn3frHyf+jSOh3YvSbi6xojSAEYVn6EPryh5047sPs1FsBzNMeHloG8bO4QTvIk0obmbUIdDWJ+Zvm/wuV4HVw/Q5ESKURYnFLniI8/rdkpJPHEjFQoR43w6zSJlEL3gtFS8M56GXtBCoAvm79RDu7rgAUY5PuUKOaX/6V3yE+HmfmfwiLsjZyT2UD5c5rgqxGVcyypWTY0RI2wV3KkkrQvtlCiFYyTQ42RIBudYL+FIuREOtCiITZYToXxbaYaBroHW13E1lA3UMYgfdLQ49RzNcKjxQrjR4tFgqDGtDMbMUUt5G1mliAIC73j9ZrZLRbE2WHqxDqVbjZhs2gQhMEpBWh5pYCG+wm6pp7uEB7wxrC4QBDaWHzTIBbt0C6JRTjxvxwW4d55Y2PD8w7hLdlsQSU2FgAAAABJRU5ErkJggg=="},82842:(e,s,t)=>{t.d(s,{A:()=>r});var a=t(89379),l=t(9950),i=t(38613),c=t(44414);const r=function(e){let{setAccess:s}=e;const t="text-start text-sm py-4 px-2 whitespace-nowrap",[r,n]=(0,l.useState)({read:!1,create:!1,delete:!1,edit:!1}),[d,o]=(0,l.useState)({read:!1,create:!1,delete:!1,edit:!1}),[m,x]=(0,l.useState)({read:!1,create:!1,delete:!1,edit:!1}),[u,h]=(0,l.useState)({read:!1,create:!1,delete:!1,edit:!1}),p=[{id:1,name:"Parient",access:r,onChange:e=>{n((0,a.A)((0,a.A)({},r),{},{[e.target.name]:e.target.checked}))}},{id:2,name:"Appointment",access:d,onChange:e=>{o((0,a.A)((0,a.A)({},d),{},{[e.target.name]:e.target.checked}))}},{id:3,name:"Invoices",access:m,onChange:e=>{x((0,a.A)((0,a.A)({},m),{},{[e.target.name]:e.target.checked}))}},{id:4,name:"Payments",access:u,onChange:e=>{h((0,a.A)((0,a.A)({},u),{},{[e.target.name]:e.target.checked}))}}];return(0,l.useEffect)(()=>{s({parientAccess:r,appointmentAccess:d,invoicesAccess:m,paymentsAccess:u})},[r,d,m,u,s]),(0,c.jsxs)("div",{className:"w-full",children:[(0,c.jsx)("h1",{className:"mb-3 text-sm text-black",children:"Access"}),(0,c.jsx)("div",{className:"w-full overflow-x-scroll",children:(0,c.jsxs)("table",{className:"w-full table-auto",children:[(0,c.jsx)("thead",{className:"overflow-hidden rounded-md bg-dry",children:(0,c.jsx)("tr",{children:["","Read","Edit","Create","Delete"].map(e=>(0,c.jsx)("th",{className:"text-start text-xs font-medium py-3 px-2 whitespace-nowrap",children:e},e))})}),(0,c.jsx)("tbody",{children:p.map(e=>(0,c.jsxs)("tr",{className:"transitions border-b border-border hover:bg-greyed",children:[(0,c.jsx)("td",{className:"text-xs font-light ".concat(t),children:e.name}),["read","edit","create","delete"].map(s=>(0,c.jsx)("td",{className:t,children:(0,c.jsx)(i.Sc,{name:s,checked:e.access[s],onChange:e.onChange})},s))]},e.id))})]})})]})}}}]);