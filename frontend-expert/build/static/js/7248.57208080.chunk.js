"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[7248],{7248:(e,t,l)=>{l.d(t,{A:()=>g});var i=l(89379),n=l(9950),s=l(58644),a=l(38613),o=l(39174),r=l(22535),d=l(99324),c=l(35887),m=l(14176),u=l(61426),p=l(43302),x=l(86027),v=l(28504),h=l(44414);const f=r.fQ.map(e=>({id:e.id,name:e.title}));const g=function(e){var t,l,g,j,y,N,b,w,S,D,C;let{closeModal:A,isOpen:P,datas:k,patientData:I,defaultPatient:z,onSuccess:L}=e;const{doctor:M}=(0,v.S)(),[R,O]=(0,n.useState)(r.XL[0].name),[B,_]=(0,n.useState)(""),[T,E]=(0,n.useState)(new Date),[F,H]=(0,n.useState)(new Date),[U,Q]=(0,n.useState)(()=>{const e=new Date;return e.setHours(e.getHours()+1),e}),[G,V]=(0,n.useState)(r.rQ.status[1].name),[W,X]=(0,n.useState)(z||{fullName:"",_id:""}),[K,$]=(0,n.useState)(f[0]),[q,J]=(0,n.useState)({email:!1,sms:!1,whatsapp:!1}),[Y,Z]=(0,n.useState)(!1),[ee,te]=(0,n.useState)(!1),[le,ie]=(0,n.useState)(!1),[ne,se]=(0,n.useState)(!1),[ae,oe]=(0,n.useState)(null),[re,de]=(0,n.useState)(!1),ce=(0,n.useRef)(),[me,ue]=(0,n.useState)(""),[pe,xe]=(0,n.useState)(null),[ve,he]=(0,n.useState)(!1),fe=null===k||void 0===k?void 0:k.title;(0,n.useEffect)(()=>{var e,t;z&&z._id&&(X({fullName:z.fullName||"",_id:z._id,email:z.email||(null===(e=z.contactDetails)||void 0===e?void 0:e.email)||"",phone:z.phone||(null===(t=z.contactDetails)||void 0===t?void 0:t.primaryContact)||""}),xe({fullName:z.fullName,_id:z._id}),ue(""),he(!1))},[z]);const ge=e=>{J((0,i.A)((0,i.A)({},q),{},{[e.target.name]:e.target.checked}))},je=async(e,t,l)=>{const i="".concat("","/doctor/send-appointment/").concat(e);try{var n,s,a;if("email"===e&&(null===W||void 0===W||null===(n=W.contactDetails)||void 0===n||!n.email))return c.oR.error("Patient email not available"),!1;if("sms"===e&&!(null!==W&&void 0!==W&&null!==(s=W.contactDetails)&&void 0!==s&&s.primaryContact||null!==W&&void 0!==W&&null!==(a=W.contactDetails)&&void 0!==a&&a.secondaryContact))return c.oR.error("Patient contact number not available"),!1;if(!l)return c.oR.error("Failed to generate PDF for sharing"),!1;const h=new File([l],"appointment.pdf",{type:"application/pdf"}),f=new FormData;if(f.append("file",h),f.append("name",(null===W||void 0===W?void 0:W.fullName)||""),"sms"===e){var o,r,d;const e=(e=>{if(!e)return"";let t=e.replace(/\D/g,"");return t.startsWith("91")&&t.length>10?t=t.substring(2):t.startsWith("0091")&&t.length>12&&(t=t.substring(4)),t})((null===W||void 0===W||null===(o=W.contactDetails)||void 0===o?void 0:o.primaryContact)||(null===W||void 0===W||null===(r=W.contactDetails)||void 0===r?void 0:r.secondaryContact)||(null===W||void 0===W||null===(d=W.contactDetails)||void 0===d?void 0:d.landline)||"");if(!e||e.length<10)return c.oR.error("Invalid contact number format"),!1;f.append("contact",e)}else{var m;f.append("email",(null===W||void 0===W||null===(m=W.contactDetails)||void 0===m?void 0:m.email)||"")}f.append("id",t||"");const g=await fetch(i,{method:"POST",credentials:"include",body:f}),j=await g.json();if(j.success)return c.oR.success("Appointment sent via ".concat("sms"===e?"SMS":"Email")),!0;{var u,p,x,v;const t=j.message||"Failed to send appointment via ".concat("sms"===e?"SMS":"Email"),l="sms"===e?(null===W||void 0===W||null===(u=W.contactDetails)||void 0===u?void 0:u.primaryContact)||(null===W||void 0===W||null===(p=W.contactDetails)||void 0===p?void 0:p.secondaryContact)||(null===W||void 0===W||null===(x=W.contactDetails)||void 0===x?void 0:x.landline)||"":(null===W||void 0===W||null===(v=W.contactDetails)||void 0===v?void 0:v.email)||"";return console.error("Failed to send appointment via ".concat(e,":"),{endpoint:i,response:j,patientContact:l}),c.oR.error(t),!1}}catch(y){var h,f,g,j;const t="sms"===e?(null===W||void 0===W||null===(h=W.contactDetails)||void 0===h?void 0:h.primaryContact)||(null===W||void 0===W||null===(f=W.contactDetails)||void 0===f?void 0:f.secondaryContact)||(null===W||void 0===W||null===(g=W.contactDetails)||void 0===g?void 0:g.landline)||"":(null===W||void 0===W||null===(j=W.contactDetails)||void 0===j?void 0:j.email)||"";return console.error("Error sending appointment via ".concat(e,":"),{error:y,endpoint:i,patientContact:t}),c.oR.error("Something went wrong while sending appointment via ".concat("sms"===e?"SMS":"Email")),!1}},ye=async()=>{de(!0);try{if(null===W||void 0===W||!W._id)return c.oR.error("Please select a patient"),void de(!1);if(!R||"Select service"===R)return c.oR.error("Please select a service"),void de(!1);if(!T)return c.oR.error("Please select a date"),void de(!1);if(!G||"Status..."===G)return c.oR.error("Please select a status"),void de(!1);const l=new Date(T);l.setHours(F.getHours(),F.getMinutes(),0,0);const n=new Date(T);n.setHours(U.getHours(),U.getMinutes(),0,0);const s={userId:null===W||void 0===W?void 0:W._id,purposeOfVisit:R,dateOfVisit:T instanceof Date?T.toISOString():T,startTime:l.toISOString(),endTime:n.toISOString(),status:G,description:B,shareWithPatient:(0,i.A)({},q),appointmentId:null===k||void 0===k?void 0:k.appointmentId},a=await fetch("".concat("","/doctor/appoitments/create"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(s)}),o=await a.json();if(a.ok){var e,t;const l=(null===(e=o.data)||void 0===e?void 0:e.appointmentId)||(null===(t=o.data)||void 0===t?void 0:t._id)||(null===k||void 0===k?void 0:k.appointmentId)||"";if(l&&(q.email||q.sms)){const e=await(async()=>{if(!ce.current)return console.error("Appointment print ref not available"),null;try{const e=ce.current.style.cssText;if(ce.current.style.cssText="position: absolute; left: -9999px; top: -9999px; visibility: visible; opacity: 1;",await new Promise(e=>setTimeout(e,100)),!ce.current)return null;const t=await(0,x.Q)(ce.current);return ce.current&&(ce.current.style.cssText=e),t}catch(e){return console.error("Error generating PDF:",e),null}})();if(e){const t=[];q.email&&t.push(je("email",l,e)),q.sms&&t.push(je("sms",l,e)),t.length>0&&await Promise.allSettled(t)}else c.oR.error("Failed to generate PDF for sharing")}fe||(X({fullName:"",_id:""}),O(r.XL[0].name),E(new Date),Q(new Date),H(new Date),V(r.rQ.status[0].name),_(""),J({email:!1,sms:!1,whatsapp:!1})),c.oR.success(o.message||(fe?"Appointment updated successfully":"Appointment created successfully")),L&&L(o),A()}else c.oR.error(o.message||"Failed to create Appointment")}catch(l){console.error("Error saving appointment:",l),c.oR.error("Something went wrong")}finally{de(!1)}};(0,n.useEffect)(()=>{if(null!==k&&void 0!==k&&k.title){E(new Date(null===k||void 0===k?void 0:k.dateOfVisit)),O(null===k||void 0===k?void 0:k.service),H(null===k||void 0===k?void 0:k.start),Q(null===k||void 0===k?void 0:k.end),J(null===k||void 0===k?void 0:k.shareData),V(null===k||void 0===k?void 0:k.status),_(null===k||void 0===k?void 0:k.message);const e=null===I||void 0===I?void 0:I.find(e=>e._id===(null===k||void 0===k?void 0:k.patientId));X({fullName:null===k||void 0===k?void 0:k.title,_id:null===k||void 0===k?void 0:k.patientId,email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",contactDetails:{email:(null===e||void 0===e?void 0:e.email)||"",primaryContact:(null===e||void 0===e?void 0:e.phone)||(null===e||void 0===e?void 0:e.mobileNumber)||(null===e||void 0===e?void 0:e.primaryContact)||"",secondaryContact:(null===e||void 0===e?void 0:e.secondaryContact)||"",landline:(null===e||void 0===e?void 0:e.landline)||""}})}},[k,I]);const Ne=(I||[]).filter(e=>{var t;return null===(t=e.fullName)||void 0===t?void 0:t.toLowerCase().includes(me.toLowerCase())});return(0,h.jsxs)(s.A,{closeModal:A,isOpen:P,title:null!==k&&void 0!==k&&k.title?"Appointment":"New Appointment",width:"max-w-3xl",children:[Y&&(0,h.jsx)(m.A,{setOpen:Z,setPatient:X,isOpen:Y,patient:!0,patientData:I}),ee&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4",children:[(0,h.jsx)("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 rounded-full",children:(0,h.jsx)(d.yRo,{className:"w-6 h-6 text-red-600"})}),(0,h.jsx)("h3",{className:"mb-2 text-lg font-semibold text-gray-900 text-center",children:"Delete Appointment"}),(0,h.jsx)("p",{className:"mb-6 text-sm text-gray-500 text-center",children:"Are you sure you want to delete this appointment? This action cannot be undone."}),(0,h.jsxs)("div",{className:"flex gap-3",children:[(0,h.jsx)("button",{onClick:()=>te(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200 focus:outline-none",disabled:le,children:"Cancel"}),(0,h.jsx)("button",{onClick:async()=>{if(null!==k&&void 0!==k&&k.appointmentId)try{ie(!0);const e=await fetch("".concat("","/api/appointments/").concat(k.appointmentId),{method:"DELETE",headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();e.ok?(c.oR.success(t.message||"Appointment deleted successfully"),te(!1),A()):c.oR.error(t.message||"Failed to delete appointment")}catch(e){c.oR.error("Something went wrong while deleting")}finally{ie(!1)}else c.oR.error("No appointment ID found")},disabled:le,className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-lg hover:bg-red-700 focus:outline-none disabled:opacity-50",children:le?"Deleting...":"Delete"})]})]})}),(0,h.jsxs)("div",{className:"flex-colo gap-2",children:[(0,h.jsx)("div",{className:"grid w-full items-center gap-2 sm:grid-cols-12",children:(0,h.jsx)("div",{className:"sm:col-span-10",children:(0,h.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Patient Name"}),fe||z?(0,h.jsx)("div",{className:"w-full",children:(0,h.jsx)("div",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 bg-gray-50",children:(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("span",{className:"text-sm font-medium text-gray-800",children:W.fullName||(null===z||void 0===z?void 0:z.fullName)||"Unknown Patient"})})})}):(0,h.jsxs)("div",{className:"w-full",children:[(0,h.jsxs)("div",{className:"relative flex items-center border border-gray-300 rounded-lg px-3 py-2 bg-white",children:[pe?(0,h.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-200 mr-2 flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:(null===pe||void 0===pe||null===(t=pe.fullName)||void 0===t||null===(l=t.charAt(0))||void 0===l?void 0:l.toUpperCase())||"P"})}):(0,h.jsx)(p.VxX,{className:"text-gray-400 mr-2",style:{fontSize:"14px"}}),(0,h.jsx)("input",{type:"text",placeholder:"Search Patient",className:"w-full border-none outline-none text-sm text-gray-600 placeholder:text-sm placeholder:text-gray-400",value:me||(null===pe||void 0===pe?void 0:pe.fullName)||"",onChange:e=>{ue(e.target.value),xe(null),he(!0)}})]}),me&&ve&&(0,h.jsx)("div",{className:"mt-1 max-h-32 overflow-y-auto rounded-lg border border-gray-200 shadow bg-white",children:0===Ne.length?(0,h.jsx)("p",{className:"p-2 text-xs text-gray-500",children:"No results found"}):Ne.map(e=>{var t,l;return(0,h.jsx)("div",{className:"cursor-pointer p-2 hover:bg-gray-100",onClick:()=>(e=>{xe(e),X({fullName:e.fullName||"",_id:e._id||"",email:e.email||"",phone:e.phone||"",image:e.image||"",contactDetails:{email:e.email||"",primaryContact:e.phone||e.mobileNumber||e.primaryContact||"",secondaryContact:e.secondaryContact||"",landline:e.landline||""}}),he(!1),ue("")})(e),children:(0,h.jsxs)("div",{className:"flex items-center gap-3",children:[(0,h.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-200 flex items-center justify-center",children:(0,h.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:(null===e||void 0===e||null===(t=e.fullName)||void 0===t||null===(l=t.charAt(0))||void 0===l?void 0:l.toUpperCase())||"P"})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm font-medium",children:e.fullName}),(0,h.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]})},e.id)})})]})]})})}),(0,h.jsxs)("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:[(0,h.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Purpose of visit"}),(0,h.jsx)(a.l6,{selectedPerson:R,setSelectedPerson:O,datas:r.XL,children:(0,h.jsxs)("div",{className:"flex w-full h-10 items-center justify-between rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium",style:{height:"40px",minHeight:"40px",maxHeight:"40px"},children:[R," ",(0,h.jsx)(o.nwe,{className:"text-lg"})]})})]}),(0,h.jsxs)("div",{className:"flex w-full flex-col gap-[2px]",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Date of visit"}),(0,h.jsx)("div",{className:"w-full h-10 ",children:(0,h.jsx)(a.O,{startDate:T,onChange:e=>E(e)})})]})]}),(0,h.jsxs)("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:[(0,h.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Start time"}),(0,h.jsx)(a.L7,{startDate:F,onChange:e=>H(e)})]}),(0,h.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"End time"}),(0,h.jsx)(a.L7,{startDate:U,onChange:e=>Q(e)})]})]}),(0,h.jsx)("div",{className:"grid w-full gap-3 sm:grid-cols-2",children:(0,h.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Status"}),(0,h.jsx)(a.l6,{selectedPerson:G,setSelectedPerson:V,datas:r.rQ.status,children:(0,h.jsxs)("div",{className:"flex-btn w-full h-10 rounded-lg border border-gray-300 px-3 py-2 text-sm font-medium text-black focus:border focus:border-subMain",style:{height:"40px"},children:[G," ",(0,h.jsx)(o.nwe,{className:"text-lg"})]})})]})}),(0,h.jsxs)("div",{className:"flex flex-col gap-2 w-full",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Description"}),(0,h.jsx)("textarea",{placeholder:null!==k&&void 0!==k&&k.message?k.message:"She will be coming for a checkup.....",rows:4,value:B,onChange:e=>{_(e.target.value)},className:"w-3/4 rounded-lg border border-gray-300 px-3 py-2 text-sm outline-none focus:border-subMain resize-none text-left",style:{textAlign:"left"}})]}),(0,h.jsxs)("div",{className:"flex w-full flex-col gap-4 mb-4",children:[(0,h.jsx)("p",{className:"text-sm font-semibold text-black",children:"Share with patient via"}),(0,h.jsxs)("div",{className:"flex flex-row mb-2 gap-3 justify-items-center",children:[(0,h.jsx)("div",{className:"flex",children:(0,h.jsx)(a.Sc,{name:"email",checked:q.email,onChange:ge,label:"Email"})}),(0,h.jsx)("div",{className:"flex",children:(0,h.jsx)(a.Sc,{name:"sms",checked:q.sms,onChange:ge,label:"SMS"})})]})]}),(0,h.jsx)("div",{className:"flex w-full gap-3 justify-end",children:(0,h.jsx)("div",{className:"min-w-[200px]",children:(0,h.jsx)(a.$n,{label:re?fe?"Updating...":"Saving...":fe?"Update":"Save",Icon:d.CU3,onClick:()=>{ye()},loading:re})})})]}),(0,h.jsx)("div",{ref:ce,style:{position:"absolute",left:"-9999px",top:"-9999px",width:"600px",height:"auto",backgroundColor:"white"},children:(0,h.jsxs)("div",{style:{fontFamily:"Arial, sans-serif",padding:"20px",maxWidth:"600px",margin:"0 auto",backgroundColor:"white",minHeight:"400px"},children:[(0,h.jsxs)("div",{style:{textAlign:"center",borderBottom:"2px solid #0097DB",paddingBottom:"10px",marginBottom:"20px"},children:[(0,h.jsx)("h1",{style:{color:"#0097DB",margin:"0 0 5px 0",fontSize:"24px"},children:"Appointment Details"}),(0,h.jsx)("p",{style:{margin:"0",fontSize:"14px",color:"#333"},children:"Medical Appointment Information"})]}),(0,h.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,h.jsx)("h2",{style:{fontSize:"18px",color:"#0097DB",marginBottom:"10px",borderLeft:"4px solid #0097DB",paddingLeft:"8px"},children:"Doctor Information"}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Name:"})," ",(null===M||void 0===M?void 0:M.fullName)||"Doctor Name"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Qualification:"})," ",(null===M||void 0===M||null===(g=M.qualificationDetails)||void 0===g?void 0:g.degreeName)||"MBBS/MD"," \xb7 ",(null===M||void 0===M||null===(j=M.systemOfMedicine)||void 0===j?void 0:j.systemOfMedicine)||"General Physician"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Address:"})," ",(null===M||void 0===M||null===(y=M.addressPerKyc)||void 0===y?void 0:y.address)||"Clinic Address",", ",(null===M||void 0===M||null===(N=M.addressPerKyc)||void 0===N?void 0:N.pincode)||"N/A"]}),(null===M||void 0===M?void 0:M.mobileNumber)&&(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Contact:"})," ",M.mobileNumber]})]}),(0,h.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,h.jsx)("h2",{style:{fontSize:"18px",color:"#0097DB",marginBottom:"10px",borderLeft:"4px solid #0097DB",paddingLeft:"8px"},children:"Patient Information"}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Name:"})," ",(null===W||void 0===W?void 0:W.fullName)||(null===k||void 0===k?void 0:k.title)||"Unknown"]}),(null===W||void 0===W||null===(b=W.contactDetails)||void 0===b?void 0:b.email)&&(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Email:"})," ",W.contactDetails.email]}),((null===W||void 0===W||null===(w=W.contactDetails)||void 0===w?void 0:w.primaryContact)||(null===W||void 0===W||null===(S=W.contactDetails)||void 0===S?void 0:S.secondaryContact))&&(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Contact:"})," ",(null===W||void 0===W||null===(D=W.contactDetails)||void 0===D?void 0:D.primaryContact)||(null===W||void 0===W||null===(C=W.contactDetails)||void 0===C?void 0:C.secondaryContact)]})]}),(0,h.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,h.jsx)("h2",{style:{fontSize:"18px",color:"#0097DB",marginBottom:"10px",borderLeft:"4px solid #0097DB",paddingLeft:"8px"},children:"Appointment Information"}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Appointment ID:"})," ",(null===k||void 0===k?void 0:k.appointmentId)||"N/A"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Date:"})," ",T?new Date(T).toLocaleDateString():"N/A"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Time:"})," ",F?new Date(F).toLocaleTimeString():"N/A"," - ",U?new Date(U).toLocaleTimeString():"N/A"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Service:"})," ",R||"N/A"]}),(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Status:"})," ",G||"N/A"]}),B&&(0,h.jsxs)("p",{style:{margin:"5px 0",fontSize:"14px"},children:[(0,h.jsx)("strong",{children:"Description:"})," ",B]})]}),(0,h.jsx)("div",{style:{marginTop:"30px",textAlign:"right",fontSize:"12px",color:"#666"},children:(0,h.jsxs)("p",{style:{margin:"0"},children:["Generated on: ",(new Date).toLocaleString()]})})]})}),ne&&(0,h.jsx)(u.A,{isOpen:ne,closeModal:()=>se(!1),file:ae,patient:W,id:null===k||void 0===k?void 0:k.appointmentId,isPrescription:!1,isAppointment:!0})]})}},14176:(e,t,l)=>{l.d(t,{A:()=>d});var i=l(89379),n=l(9950),s=l(58644),a=l(39174),o=(l(22535),l(38613)),r=l(44414);const d=function(e){let{setOpen:t,setPatient:l,isOpen:d,patient:c,patientData:m=[]}=e;const[u,p]=(0,n.useState)(""),[x,v]=(0,n.useState)("");(0,n.useEffect)(()=>{d&&(v(""),p(""))},[d]);const h=m.filter(e=>{var t,l;const i=u.toLowerCase();var n;return c?null===(n=e.fullName)||void 0===n?void 0:n.toLowerCase().includes(i):(null===(t=e.serviceName)||void 0===t?void 0:t.toLowerCase().includes(i))||(null===(l=e.medicineName)||void 0===l?void 0:l.toLowerCase().includes(i))}),f=()=>{const e=m.find(e=>e._id===x);e&&l((0,i.A)({},e)),t(!1)};return(0,r.jsx)(s.A,{closeModal:f,isOpen:d,title:c?"Patients":"Medicine & Services",width:"max-w-xl",children:(0,r.jsxs)("div",{className:"flex-colo gap-6",children:[(0,r.jsxs)("div",{className:"flex w-full items-center gap-4 rounded-lg border border-border p-3",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search",className:"w-full",value:u,onChange:e=>p(e.target.value)}),(0,r.jsx)(a.iyI,{className:"text-xl"})]}),(0,r.jsx)("div",{className:"h-[500px] w-full overflow-y-scroll",children:0===h.length?(0,r.jsx)("p",{className:"text-sm text-textGray",children:"No results found"}):(0,r.jsx)("div",{className:"space-y-2",children:h.map(e=>(0,r.jsxs)("div",{onClick:()=>v(e._id),className:"".concat(x===e._id?"border-subMain bg-subMain text-white":"border-border"," group rounded-xl border-[1px] p-4 hover:bg-subMain hover:text-white cursor-pointer"),children:[(0,r.jsx)("h6",{className:"text-sm",children:c?e.fullName:e.serviceName}),c&&(0,r.jsx)("p",{className:"".concat(x===e._id?"text-white":"text-textGray"," mt-1 text-xs group-hover:text-white"),children:e.email})]},e._id))})}),(0,r.jsx)(o.$n,{onClick:f,label:"Add",Icon:a.Ca6})]})})}}}]);