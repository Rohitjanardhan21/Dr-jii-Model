"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[4914],{27358:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(9950),l=s(28429),i=s(68873),n=s(58644),d=s(73719),r=s(44414);const c=function(e){let{patientName:t}=e;const s=(0,l.Zp)(),{id:c}=(0,l.g)(),[o,x]=(0,a.useState)(!0),[m,p]=(0,a.useState)([]),[h,u]=(0,a.useState)(!1),[v,f]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{c&&(async()=>{try{x(!0);const e=await fetch("".concat("","/doctor/patient/payments/").concat(c),{headers:{"Content-Type":"application/json"},credentials:"include"}),t=await e.json();p(t)}catch(e){console.error("Error fetching payments:",e)}finally{x(!1)}})()},[c,v]),o?(0,r.jsx)("div",{className:"flex items-center justify-center h-screen w-full",children:(0,r.jsx)(i.PSR,{className:"animate-spin text-4xl text-subMain"})}):(0,r.jsxs)("div",{className:"p-6 w-full space-y-1 text-xs",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h3",{className:"text-xl font-medium",children:"Payments"})}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{onClick:()=>u(!0),className:"rounded bg-[#0097DB] px-4 py-2 text-[14px] text-white hover:bg-[#007bb5] whitespace-nowrap",children:"+ New Payment"})})]}),(0,r.jsx)("div",{className:"text-[10px] text-gray-500 max-w-[300px] mb-4",children:"Review and manage all payments made by patients for your medical services."}),(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-3 py-2 text-left text-[14px] font-medium text-gray-700",children:"Start Date"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-[14px] font-medium text-gray-700",children:"Services"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-[14px] font-medium text-gray-700",children:"Amount"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-[14px] font-medium text-gray-700",children:"Status"}),(0,r.jsx)("th",{className:"px-3 py-2 text-left text-[14px] font-medium text-gray-700",children:"Method"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y p-6 divide-gray-200",children:m.map(e=>(0,r.jsxs)("tr",{onClick:()=>{return t=e._id,void s("/payments/preview/".concat(t));var t},className:"cursor-pointer hover:bg-gray-50 transition",children:[(0,r.jsx)("div",{className:"pt-3 pb-3",children:(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:new Date(e.startDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.services&&e.services.length>0?e.services.map(e=>{var t;return(null===(t=e.serviceId)||void 0===t?void 0:t.serviceName)||"Unknown"}).join(", "):"\u2014"}),(0,r.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap",children:["\u20b9",e.amount]}),(0,r.jsx)("td",{className:"py-2 pl-3 whitespace-nowrap",children:(0,r.jsx)("span",{className:"text-[12px] pxr-2 py-1 p-2 rounded-full font-medium\n                      ".concat("Approved"===e.status?"bg-green-100 text-green-700":"Pending"===e.status?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:e.status})}),(0,r.jsx)("td",{className:"px-4 py-2 whitespace-nowrap",children:e.method})]},e._id))})]}),(0,r.jsxs)("div",{className:"mt-4 text-xs text-gray-500",children:["Showing 1-",m.length," payments"]}),h&&(0,r.jsx)(n.A,{isOpen:h,closeModal:()=>u(!1),title:"Create Invoice",width:"max-w-6xl",children:(0,r.jsx)("div",{className:"max-h-[80vh] overflow-y-auto",children:(0,r.jsx)(d.default,{closeModal:()=>{u(!1)},onSuccess:()=>f(!0),defaultPatient:{_id:c,fullName:t}})})})]})]})}},36315:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(9950),l=s(54826),i=s(74930),n=s(28429),d=s(44414);const r=function(){const e=(0,n.Zp)(),[t]=(0,a.useState)([{_id:"1",invoiceId:"#206791",date:"12/06/2021",patientName:"Mumtaz Ali",treatment:"Follow up",dueDate:"16/06/2021",amount:"6070"},{_id:"2",invoiceId:"#206791",date:"10/02/2023",patientName:"Noufal Naushad",treatment:"Follow up",dueDate:"14/02/2023",amount:"6070"},{_id:"3",invoiceId:"#206791",date:"09/01/2023",patientName:"Poonam Rawat",treatment:"Follow up",dueDate:"13/01/2023",amount:"6070"},{_id:"4",invoiceId:"#206791",date:"08/01/2023",patientName:"Reshma R",treatment:"Follow up",dueDate:"12/01/2023",amount:"6070"}]);return(0,d.jsxs)("div",{className:"p-6 w-full bg-[#FAFAFA] min-h-screen text-[#2E2E2E]",children:[(0,d.jsxs)("div",{className:"flex flex-wrap justify-between items-center mb-6 gap-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center gap-2 min-w-[200px]",children:[(0,d.jsx)("label",{className:"text-sm font-medium text-[#2E2E2E]",children:"Select Report Category"}),(0,d.jsxs)("div",{className:"relative w-32",children:[(0,d.jsxs)("select",{className:"appearance-none w-full border border-gray-300 rounded-md pl-3 pr-6 py-2 text-sm text-gray-400 bg-white",children:[(0,d.jsx)("option",{children:"Income"}),(0,d.jsx)("option",{children:"Expenses"})]}),(0,d.jsx)("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 text-xs pointer-events-none",children:"\u25bc"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 justify-center min-w-[300px]",children:[(0,d.jsx)("input",{type:"date",placeholder:"1 Dec 2021",className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-400"}),(0,d.jsx)("span",{className:"text-gray-500",children:"To"}),(0,d.jsx)("input",{type:"date",placeholder:"31 Dec 2022",className:"border border-gray-300 rounded-md px-3 py-2 text-sm text-gray-400"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("button",{className:"flex flex-col items-center border border-red-500 text-red-500 hover:bg-red-50 px-3 py-1 rounded-md",children:[(0,d.jsx)(i.pHD,{className:"text-base"}),(0,d.jsx)("span",{className:"text-xs pt-[2px]",children:"Mail"})]}),(0,d.jsxs)("button",{className:"flex flex-col items-center border border-red-500 text-red-500 hover:bg-red-50 px-3 py-1 rounded-md",children:[(0,d.jsx)(i.Mvz,{className:"text-base"}),(0,d.jsx)("span",{className:"text-xs pt-[2px]",children:"Print"})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md shadow-sm mb-6",children:[(0,d.jsx)("div",{className:"bg-[#F3F3F3] px-4 py-2 rounded-t-md",children:(0,d.jsx)("h2",{className:"text-md font-semibold text-black",children:"Summary"})}),(0,d.jsxs)("div",{className:"p-4 grid grid-cols-2 sm:grid-cols-5 gap-4 text-sm bg-white",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-black",children:"Cost(INR)"}),(0,d.jsx)("div",{children:"396.00"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-black",children:"Discount(INR)"}),(0,d.jsx)("div",{children:"0.00"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-black",children:"Income After Discount(INR)"}),(0,d.jsx)("div",{children:"396.00"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-black",children:"Tax(INR)"}),(0,d.jsx)("div",{children:"0.00"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-medium text-black",children:"Invoice Amount(INR)"}),(0,d.jsx)("div",{children:"396.00"})]})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-md shadow-sm p-4",children:[(0,d.jsx)("h2",{className:"text-md font-semibold mb-4 text-black",children:"Invoices"}),(0,d.jsx)("div",{className:"overflow-x-auto overflow-y-auto max-h-[350px]",children:(0,d.jsxs)("table",{className:"w-full table-auto text-sm text-left text-gray-700",children:[(0,d.jsx)("thead",{className:"bg-[#F3F3F3] text-gray-700 sticky top-0 z-10",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-2",children:"Serial Number"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Invoice ID"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Date"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Patient"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Treatments & Products"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Due Date"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Amount"}),(0,d.jsx)("th",{className:"px-4 py-2",children:"Actions"})]})}),(0,d.jsx)("tbody",{children:t.map((t,s)=>(0,d.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-4 py-3",children:s+1}),(0,d.jsx)("td",{className:"px-4 py-3",children:t.invoiceId}),(0,d.jsx)("td",{className:"px-4 py-3",children:t.date}),(0,d.jsx)("td",{className:"px-4 py-3",children:t.patientName}),(0,d.jsx)("td",{className:"px-4 py-3",children:t.treatment}),(0,d.jsx)("td",{className:"px-4 py-3",children:t.dueDate}),(0,d.jsxs)("td",{className:"px-4 py-3 text-[#2E2E2E] font-semibold",children:["\u20b9",t.amount]}),(0,d.jsx)("td",{className:"px-4 py-3",children:(0,d.jsx)("button",{onClick:()=>{return s=t._id,void e("/invoices/preview/".concat(s));var s},className:"text-red-500 hover:text-red-600",children:(0,d.jsx)(l.Ny1,{})})})]},t._id))})]})})]})]})}},51667:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(9950),l=s(58644),i=(s(38613),s(39174)),n=s(99324),d=s(35887),r=s(18795),c=s(44414);const o=function(e){var t,s;let{closeModal:a,isOpen:o,datas:x}=e;console.log("appointment preview datas",x);const m=Array.isArray(x)?x[0]:x,p=(null===m||void 0===m?void 0:m.purposeOfVisit)||(null===m||void 0===m?void 0:m.purpose)||(null===m||void 0===m?void 0:m.service)||"",h=(null===m||void 0===m?void 0:m.description)||(null===m||void 0===m?void 0:m.message)||"",u=null!==m&&void 0!==m&&m.dateOfVisit?new Date(null===m||void 0===m?void 0:m.dateOfVisit):new Date,v=null!==m&&void 0!==m&&m.startTime?new Date(null===m||void 0===m?void 0:m.startTime):(null===m||void 0===m?void 0:m.start)||new Date,f=null!==m&&void 0!==m&&m.endTime?new Date(null===m||void 0===m?void 0:m.endTime):(null===m||void 0===m?void 0:m.end)||new Date,g=(null===m||void 0===m?void 0:m.status)||"",N=null!==m&&void 0!==m&&m.dateOfVisit?new Date(null===m||void 0===m?void 0:m.dateOfVisit):new Date,j=null!==m&&void 0!==m&&m.createdAt?new Date(null===m||void 0===m?void 0:m.createdAt):new Date,b=(null===m||void 0===m?void 0:m.patientName)||"",y=(null===m||void 0===m?void 0:m.userName)||"",w=(null===m||void 0===m?void 0:m.shareWithPatient)||(null===m||void 0===m?void 0:m.shareData)||{email:!1,sms:!1,whatsapp:!1};return console.log("Processed appointment data:",{patientName:b,doctorName:y,services:p,dateOfVisit:N,createdAt:j,status:g}),console.log("Preview appointment data:",x),(0,c.jsx)(l.A,{closeModal:a,isOpen:o,title:"Appointment Details",width:"max-w-3xl",children:(0,c.jsxs)("div",{className:"flex-colo gap-6",children:[(0,c.jsxs)("div",{className:"grid w-full items-center gap-4 sm:grid-cols-2",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,c.jsx)("p",{className:"text-sm font-semibold text-black",children:"Patient Name"}),(0,c.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 bg-gray-50",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-200 mr-3 flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:(null===b||void 0===b||null===(t=b.charAt(0))||void 0===t?void 0:t.toUpperCase())||"P"})}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("span",{className:"text-sm font-medium text-gray-800",children:b||"Unknown Patient"})})]})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,c.jsx)("p",{className:"text-sm font-semibold text-black",children:"Doctor Name"}),(0,c.jsxs)("div",{className:"flex items-center border border-gray-300 rounded-lg px-3 py-2 bg-gray-50",children:[(0,c.jsx)("div",{className:"w-8 h-8 rounded-md bg-gray-200 mr-3 flex items-center justify-center",children:(0,c.jsx)("span",{className:"text-xs text-gray-600 font-medium",children:(null===y||void 0===y||null===(s=y.charAt(0))||void 0===s?void 0:s.toUpperCase())||"D"})}),(0,c.jsx)("div",{className:"flex flex-col",children:(0,c.jsx)("span",{className:"text-sm font-medium text-gray-800",children:y||"Unknown Doctor"})})]})]})]}),(0,c.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Purpose of visit"}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base font-semibold",children:[p," ",(0,c.jsx)(i.nwe,{className:"text-xl invisible"})]})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Date of visit"}),(0,c.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base",children:u.toLocaleDateString()})]})]}),(0,c.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Start time"}),(0,c.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base",children:v instanceof Date?v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"End time"}),(0,c.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base",children:f instanceof Date?f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A"})]})]}),(0,c.jsxs)("div",{className:"grid w-full gap-4 sm:grid-cols-2",children:[(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Status"}),(0,c.jsx)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base",children:(0,c.jsx)("span",{className:"px-4 py-1 ".concat("Approved"===g?"bg-subMain text-subMain":"Pending"===g?"bg-orange-500 text-orange-500":"Cancelled"===g&&"bg-red-600 text-red-600"," rounded-xl bg-opacity-10 text-xs"),children:g})})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Created At"}),(0,c.jsxs)("div",{className:"flex w-full items-center justify-between rounded-md border border-gray-300 p-4 text-base",children:[j.toLocaleDateString()," ",j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-3",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Description"}),(0,c.jsx)("div",{className:"w-full rounded-md border border-gray-300 p-4 text-base min-h-[100px]",children:h})]}),(0,c.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,c.jsx)("p",{className:"text-sm text-black",children:"Shared with patient via"}),(0,c.jsxs)("div",{className:"flex flex-wrap gap-4 sm:flex-nowrap",children:[w.email&&(0,c.jsx)("div",{className:"px-4 py-2 bg-gray-100 rounded-md text-sm",children:"Email"}),w.sms&&(0,c.jsx)("div",{className:"px-4 py-2 bg-gray-100 rounded-md text-sm",children:"SMS"}),w.whatsapp&&(0,c.jsx)("div",{className:"px-4 py-2 bg-gray-100 rounded-md text-sm",children:"WhatsApp"}),!w.email&&!w.sms&&!w.whatsapp&&(0,c.jsx)("div",{className:"px-4 py-2 bg-gray-100 rounded-md text-sm text-gray-500",children:"None"})]})]}),(0,c.jsxs)("div",{className:"flex w-full gap-3",children:[(0,c.jsxs)("button",{onClick:()=>{try{const e=new r.Ay,t=e.internal.pageSize.getWidth(),s=e.internal.pageSize.getHeight(),a=20;let l=20;e.setFillColor(0,151,219),e.rect(0,0,t,30,"F"),e.setTextColor(255,255,255),e.setFontSize(20),e.setFont("helvetica","bold"),e.text("Appointment Details",t/2,20,{align:"center"}),l=45,e.setTextColor(0,0,0),e.setFillColor(240,240,240),e.rect(a,l,t-2*a,8,"F"),e.setTextColor(0,151,219),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("PATIENT & DOCTOR INFORMATION",a+2,l+5),l+=15,e.setTextColor(0,0,0),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Patient Name:",a,l),e.setFont("helvetica","normal"),e.text(b||"Unknown Patient",a+50,l),l+=8,e.setFont("helvetica","bold"),e.text("Doctor Name:",a,l),e.setFont("helvetica","normal"),e.text(y||"Unknown Doctor",a+50,l),l+=15,e.setFillColor(240,240,240),e.rect(a,l,t-2*a,8,"F"),e.setTextColor(0,151,219),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("APPOINTMENT DETAILS",a+2,l+5),l+=15,e.setTextColor(0,0,0),e.setFontSize(10),e.setFont("helvetica","bold"),e.text("Purpose of Visit:",a,l),e.setFont("helvetica","normal"),e.text(p||"N/A",a+50,l),l+=8,e.setFont("helvetica","bold"),e.text("Date of Visit:",a,l),e.setFont("helvetica","normal"),e.text(u.toLocaleDateString(),a+50,l),l+=8,e.setFont("helvetica","bold"),e.text("Start Time:",a,l),e.setFont("helvetica","normal"),e.text(v instanceof Date?v.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",a+50,l),l+=8,e.setFont("helvetica","bold"),e.text("End Time:",a,l),e.setFont("helvetica","normal"),e.text(f instanceof Date?f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"N/A",a+50,l),l+=8,e.setFont("helvetica","bold"),e.text("Status:",a,l),e.setFont("helvetica","normal"),"Approved"===g?e.setTextColor(0,151,219):"Pending"===g?e.setTextColor(255,136,0):"Cancelled"===g&&e.setTextColor(220,38,38),e.text(g||"N/A",a+50,l),e.setTextColor(0,0,0),l+=8,e.setFont("helvetica","bold"),e.text("Created At:",a,l),e.setFont("helvetica","normal"),e.text("".concat(j.toLocaleDateString()," ").concat(j.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),a+50,l),l+=15,e.setFillColor(240,240,240),e.rect(a,l,t-2*a,8,"F"),e.setTextColor(0,151,219),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("DESCRIPTION",a+2,l+5),l+=15,e.setTextColor(0,0,0),e.setFontSize(10),e.setFont("helvetica","normal");const i=h||"No description provided",n=e.splitTextToSize(i,t-2*a-4);e.text(n,a+2,l),l+=5*n.length+10,l>s-40&&(e.addPage(),l=20),e.setFillColor(240,240,240),e.rect(a,l,t-2*a,8,"F"),e.setTextColor(0,151,219),e.setFontSize(12),e.setFont("helvetica","bold"),e.text("SHARED WITH PATIENT VIA",a+2,l+5),l+=15,e.setTextColor(0,0,0),e.setFontSize(10),e.setFont("helvetica","normal");const c=[];w.email&&c.push("Email"),w.sms&&c.push("SMS"),w.whatsapp&&c.push("WhatsApp"),e.text(c.length>0?c.join(", "):"None",a+2,l),l+=15,e.setFontSize(8),e.setTextColor(128,128,128),e.text("Generated on ".concat((new Date).toLocaleDateString()," at ").concat((new Date).toLocaleTimeString()),t/2,s-10,{align:"center"});const o="Appointment_".concat((null===b||void 0===b?void 0:b.replace(/\s+/g,"_"))||"Details","_").concat(u.toLocaleDateString().replace(/\//g,"-"),".pdf");e.save(o),d.oR.success("PDF downloaded successfully!")}catch(e){console.error("Download error:",e),d.oR.error("Failed to download PDF")}},className:"flex-1 rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white hover:bg-blue-700 flex items-center justify-center gap-2",children:[(0,c.jsx)(n.SCg,{className:"text-lg"}),"Share"]}),(0,c.jsx)("button",{onClick:a,className:"flex-1 rounded-lg bg-subMain px-4 py-2 text-sm font-medium text-white hover:bg-opacity-90",children:"Close"})]})]})})};var x=s(61533),m=s(68873),p=s(28429),h=s(7248);const u=function(e){let{doctor:t}=e;const[s,l]=(0,a.useState)(!1),[i,n]=(0,a.useState)({}),[d,r]=(0,a.useState)([]),[u,v]=(0,a.useState)(!0),{id:f}=(0,p.g)(),[g,N]=(0,a.useState)(!1),[j,b]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat("","/doctor/unique/patients"),{credentials:"include"}),t=await e.json();b((null===t||void 0===t?void 0:t.patients)||[])}catch(e){console.log("Error fetching data:",e)}})()},[]),console.log("uniquePatients",j);const y=j.find(e=>{var t;return e._id===f||(null===(t=e.userId)||void 0===t?void 0:t._id)===f});function w(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}console.log("currentPatient",y);const D=async()=>{try{v(!0);const e=await fetch("".concat("","/doctor/user/appointments?userId=").concat(f),{credentials:"include"}),t=(await e.json()).map((e,t)=>({id:t+1,createdAt:e.createdAt,dateOfVisit:e.dateOfVisit,patientName:e.userId.fullName,phone:e.userId.contactDetails.primaryContact,status:e.status,description:e.description,purposeOfVisit:e.purposeOfVisit,userName:e.doctorId.fullName,shareWithPatient:e.shareWithPatient,startTime:e.startTime,endTime:e.endTime,time:"".concat(w(e.startTime)," - ").concat(w(e.endTime))}));r(t)}catch(e){console.log("error fetching appointments...",e)}finally{v(!1)}};return(0,a.useEffect)(()=>{f&&D()},[f]),(0,c.jsxs)("div",{className:"w-full",children:[s&&(0,c.jsx)(o,{datas:i,isOpen:s,closeModal:()=>{l(!1),n({})}}),g&&(0,c.jsx)(h.A,{isOpen:g,closeModal:()=>{N(!1)},doctor:t,patientData:y?[y]:[],defaultPatient:y,onAppointmentCreated:D}),u?(0,c.jsx)("div",{className:"flex h-screen w-full items-center justify-center",children:(0,c.jsx)(m.PSR,{className:"animate-spin text-3xl text-subMain"})}):(0,c.jsxs)("div",{children:[(0,c.jsxs)("span",{className:"flex items-center justify-between",children:[(0,c.jsx)("h1",{className:"mb-6 text-lg font-medium",children:"Appointments"}),(0,c.jsx)("button",{className:"mb-6 rounded bg-[#0097DB] px-4 py-2 text-white hover:bg-[#007bb5]",onClick:()=>{N(!0)},children:"New Appointment +"})]}),(0,c.jsx)("div",{className:"w-full overflow-x-scroll",children:(0,c.jsx)(x.Y8,{data:d,doctor:t,functions:{preview:e=>{n(e),l(!0)}}})})]})]})}}}]);