"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[1294],{11827:(e,t,s)=>{s.d(t,{A:()=>r});s(9950);var a=s(35887),l=s(58549),i=s(44414);const r=function(e){let{closeModal:t,onSuccess:s}=e;return(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{"data-aos":"fade-up","data-aos-duration":"1000","data-aos-delay":"100","data-aos-offset":"200",className:" bg-white px-6",children:(0,i.jsx)(l.A,{titles:!0,isModal:!0,onSave:async e=>{try{const t=await fetch("".concat("","/doctor/patients/create"),{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e)}),l=await t.json();t.ok?(a.oR.success(l.message||"Patient created successfully!"),s&&s(l.data||e)):a.oR.error((null===l||void 0===l?void 0:l.message)||"Failed to create patient")}catch(t){console.error(t),a.oR.error("Something went wrong. Please try again.")}},closeModal:t})})})}},91294:(e,t,s)=>{s.r(t),s.d(t,{default:()=>A});var a=s(89379),l=s(9950),i=s(17340),r=s(28429),o=s(42074),n=s(35887),d=(s(21067),s(39174)),c=s(54826),x=s(72348),m=s.n(x),u=s(50384),h=s(39452),g=s(44414);function p(e){let{data:t,colors:s}=e;const a={chart:{id:"basic-bar",sparkline:{enabled:!0},toolbar:{show:!1},animations:{enabled:!0,easing:"easeinout",speed:400,animateGradually:{enabled:!0,delay:150},dynamicAnimation:{enabled:!0,speed:150}}},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],labels:{show:!1},axisTicks:{show:!1}},yaxis:{show:!1},dataLabels:{enabled:!1},tooltip:{custom:function(e){let{series:t,seriesIndex:s,dataPointIndex:a,w:l}=e;return'<div className="bg-white py-2 px-2 text-xs border-[.5px] border-border">Total: <span className="font-semibold">'+t[s][a]+"</span></div>"}},grid:{show:!1},plotOptions:{bar:{columnWidth:"75%",distributed:!1,borderRadius:2}},colors:[s]},l=[{name:"series-1",data:t}];return(0,g.jsx)(h.A,{options:a,series:l,type:"bar",width:"100%",height:50})}var b=s(74930);const v="text-start text-sm font-medium py-3 px-2 whitespace-nowrap",f="text-start text-sm py-4 px-2 whitespace-nowrap";function y(e){let{data:t}=e;const s=(0,r.Zp)(),[a,i]=(0,l.useState)(1),o=Math.ceil(t.length/5),n=5*(a-1),d=n+5,c=(0,l.useMemo)(()=>t.slice(n,d),[t,n,d]),x=e=>{s("/payments/edit/".concat(e)),window.scrollTo(0,0)};return(0,g.jsxs)("div",{className:"w-full",children:[(0,g.jsx)("div",{className:"hidden sm:block w-full overflow-x-auto",children:(0,g.jsxs)("table",{className:"w-full min-w-[900px] table-auto",children:[(0,g.jsx)("thead",{className:"bg-dry rounded-md",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:v,children:"#"}),(0,g.jsx)("th",{className:v,children:"Patient"}),(0,g.jsx)("th",{className:v,children:"Date"}),(0,g.jsx)("th",{className:v,children:"Status"}),(0,g.jsxs)("th",{className:v,children:["Amount ",(0,g.jsx)("span",{className:"text-xs font-light",children:"(Tsh)"})]}),(0,g.jsx)("th",{className:v,children:"Method"})]})}),(0,g.jsx)("tbody",{children:c.map((e,t)=>{var s,a,l,i,r;return(0,g.jsxs)("tr",{onClick:()=>x(null===e||void 0===e?void 0:e._id),className:"border-b border-border hover:bg-greyed cursor-pointer transition",children:[(0,g.jsx)("td",{className:f,children:n+t+1}),(0,g.jsx)("td",{className:f,children:(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("img",{src:null===e||void 0===e||null===(s=e.patient)||void 0===s?void 0:s.userImage,alt:null===e||void 0===e||null===(a=e.patient)||void 0===a?void 0:a.fullName,className:"h-10 w-10 rounded-full border object-cover"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"font-medium",children:null===e||void 0===e||null===(l=e.patient)||void 0===l?void 0:l.fullName}),(0,g.jsx)("p",{className:"text-xs text-textGray",children:null===e||void 0===e||null===(i=e.patient)||void 0===i||null===(r=i.contactDetails)||void 0===r?void 0:r.primaryContact})]})]})}),(0,g.jsx)("td",{className:f,children:null===e||void 0===e?void 0:e.date}),(0,g.jsx)("td",{className:f,children:(0,g.jsx)("span",{className:"px-3 py-1 rounded-full text-xs bg-opacity-10\n                      ".concat("Approved"===e.status?"bg-subMain text-subMain":"Pending"===e.status?"bg-orange-500 text-orange-500":"bg-red-600 text-red-600","\n                    "),children:null===e||void 0===e?void 0:e.status})}),(0,g.jsx)("td",{className:"".concat(f," font-semibold"),children:parseInt(null===e||void 0===e?void 0:e.amount)}),(0,g.jsx)("td",{className:f,children:null===e||void 0===e?void 0:e.method})]},null===e||void 0===e?void 0:e._id)})})]})}),(0,g.jsx)("div",{className:"block sm:hidden space-y-4",children:c.map(e=>{var t,s,a,l,i;return(0,g.jsxs)("div",{onClick:()=>x(null===e||void 0===e?void 0:e._id),className:"bg-white border border-border rounded-xl p-4 shadow-sm cursor-pointer",children:[(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("img",{src:null===e||void 0===e||null===(t=e.patient)||void 0===t?void 0:t.userImage,alt:null===e||void 0===e||null===(s=e.patient)||void 0===s?void 0:s.fullName,className:"h-10 w-10 rounded-full object-cover border"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm font-semibold",children:null===e||void 0===e||null===(a=e.patient)||void 0===a?void 0:a.fullName}),(0,g.jsx)("p",{className:"text-xs text-textGray",children:null===e||void 0===e||null===(l=e.patient)||void 0===l||null===(i=l.contactDetails)||void 0===i?void 0:i.primaryContact})]})]}),(0,g.jsxs)("div",{className:"mt-4 grid grid-cols-2 gap-3 text-sm",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-textGray",children:"Date"}),(0,g.jsx)("p",{children:null===e||void 0===e?void 0:e.date})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-textGray",children:"Method"}),(0,g.jsx)("p",{children:null===e||void 0===e?void 0:e.method})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-textGray",children:"Amount"}),(0,g.jsxs)("p",{className:"font-semibold",children:[parseInt(null===e||void 0===e?void 0:e.amount)," Tsh"]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-xs text-textGray",children:"Status"}),(0,g.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs bg-opacity-10\n                    ".concat("Approved"===e.status?"bg-subMain text-subMain":"Pending"===e.status?"bg-orange-500 text-orange-500":"bg-red-600 text-red-600","\n                  "),children:null===e||void 0===e?void 0:e.status})]})]})]},null===e||void 0===e?void 0:e._id)})}),t.length>5&&(0,g.jsxs)("div",{className:"mt-6 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,g.jsxs)("div",{className:"text-sm text-textGray",children:["Showing ",n+1," to"," ",Math.min(d,t.length)," of ",t.length," entries"]}),(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsxs)("button",{onClick:()=>{i(e=>Math.max(e-1,1))},disabled:1===a,className:"px-3 py-2 rounded-lg text-sm flex items-center\n                ".concat(1===a?"bg-gray-100 text-textGray cursor-not-allowed":"bg-white border border-border hover:bg-greyed","\n              "),children:[(0,g.jsx)(b.irw,{className:"mr-1"}),"Prev"]}),(0,g.jsx)("div",{className:"hidden sm:flex gap-1",children:(()=>{const e=[];let t=Math.max(1,a-Math.floor(2.5)),s=Math.min(o,t+5-1);s-t+1<5&&(t=Math.max(1,s-5+1));for(let a=t;a<=s;a++)e.push(a);return e})().map(e=>(0,g.jsx)("button",{onClick:()=>(e=>{i(e)})(e),className:"px-3 py-2 rounded-lg text-sm\n                    ".concat(a===e?"bg-subMain text-white":"bg-white border border-border hover:bg-greyed","\n                  "),children:e},e))}),(0,g.jsxs)("button",{onClick:()=>{i(e=>Math.min(e+1,o))},disabled:a===o,className:"px-3 py-2 rounded-lg text-sm flex items-center\n                ".concat(a===o?"bg-gray-100 text-textGray cursor-not-allowed":"bg-white border border-border hover:bg-greyed","\n              "),children:["Next",(0,g.jsx)(b.fOo,{className:"ml-1"})]})]})]})]})}var j=s(7248);const N=()=>{const[e,t]=(0,l.useState)([]),[s,a]=(0,l.useState)([]),[i,r]=(0,l.useState)(!0),[o,n]=(0,l.useState)(null),[d,c]=(0,l.useState)(!1),x=async()=>{try{r(!0);const e=new Date,s=new Date(e.setHours(0,0,0,0)).toISOString(),a=new Date(e.setHours(23,59,59,999)).toISOString(),l=await fetch("".concat("","/doctor/appointments?start=").concat(encodeURIComponent(s),"&end=").concat(encodeURIComponent(a)),{credentials:"include"});if(l.ok){const e=await l.json();t(e)}else console.error("Failed to fetch appointments"),t([])}catch(e){console.error("Error fetching today's appointments:",e),t([])}finally{r(!1)}};(0,l.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat("","/doctor/unique/patients"),{credentials:"include"});if(e.ok){const t=await e.json();a((null===t||void 0===t?void 0:t.patients)||[])}else console.error("Failed to fetch unique patients"),a([])}catch(e){console.error("Error fetching unique patients:",e),a([])}})(),x()},[]);const m=e=>{const t=new Date(e)-new Date,s=Math.round(Math.abs(t)/6e4),a=Math.floor(s/60),l=s%60;let i="";return a>0?(i="".concat(a," hr").concat(a>1?"s":""),l>0&&(i+=" ".concat(l," min"))):i="".concat(l," min"),t<0?"".concat(i," ago"):"in ".concat(i)};return i?(0,g.jsxs)("div",{className:"rounded-xl border-[1px] border-border bg-white p-5 xl:mt-6",children:[(0,g.jsx)("h2",{className:"mb-4 text-sm font-medium",children:"Today Appointments"}),(0,g.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,g.jsx)("p",{className:"text-textGray",children:"Loading appointments..."})})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"rounded-xl border-[1px] border-border bg-white p-5 xl:mt-6",children:[(0,g.jsx)("h2",{className:"mb-4 text-sm font-medium",children:"Today Appointments"}),0===e.length?(0,g.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,g.jsx)("p",{className:"text-textGray text-sm",children:"No appointments for today"})}):(0,g.jsx)("div",{className:"space-y-4",children:e.map((e,t)=>{var s;return(0,g.jsxs)("div",{className:"grid grid-cols-12 items-center gap-2 cursor-pointer hover:bg-gray-50 rounded-lg p-2 transition-colors",onClick:()=>(e=>{var t,s,a,l,i;const r={id:e._id,appointmentId:e._id,patientId:null===(t=e.userId)||void 0===t?void 0:t._id,title:(null===(s=e.userId)||void 0===s?void 0:s.fullName)||"Unknown",image:null===(a=e.userId)||void 0===a?void 0:a.image,email:null===(l=e.userId)||void 0===l?void 0:l.email,phone:null===(i=e.userId)||void 0===i?void 0:i.phone,service:e.purposeOfVisit,message:e.description||"No description provided",dateOfVisit:e.dateOfVisit,start:new Date(e.startTime),end:new Date(e.endTime),status:e.status,shareData:e.shareWithPatient||{email:!1,sms:!1,whatsapp:!1}};n(r),c(!0)})(e),children:[(0,g.jsx)("p",{className:"col-span-3 text-[12px] font-light text-textGray",children:m(e.startTime)}),(0,g.jsxs)("div",{className:"flex-colo relative col-span-2",children:[(0,g.jsx)("hr",{className:"h-20 w-[2px] bg-border"}),(0,g.jsxs)("div",{className:"flex-colo h-7 w-7 bg-opacity-10 text-sm ".concat("Pending"===e.status&&"bg-orange-500 text-orange-500"," ").concat("Cancelled"===e.status&&"bg-red-500 text-red-500"," ").concat("Approved"===e.status&&"bg-green-500 text-green-500"," absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 transform rounded-full"),children:["Pending"===e.status&&(0,g.jsx)(u.D7y,{}),"Cancelled"===e.status&&(0,g.jsx)(u.Fl6,{}),"Approved"===e.status&&(0,g.jsx)(u.HU4,{})]})]}),(0,g.jsxs)("div",{className:"col-span-6 flex flex-col gap-1",children:[(0,g.jsx)("h2",{className:"text-xs font-medium",children:(null===(s=e.userId)||void 0===s?void 0:s.fullName)||"Unknown"}),(0,g.jsxs)("p",{className:"text-[12px] font-light text-textGray",children:[new Date(e.startTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(e.endTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),(0,g.jsx)("div",{className:"col-span-1 flex justify-end",children:(0,g.jsx)("div",{className:"w-2 h-2 bg-gray-300 rounded-full"})})]},e._id||t)})})]}),d&&o&&(0,g.jsx)(j.A,{datas:o,isOpen:d,patientData:s,closeModal:()=>{c(!1),n(null),x()}})]})};var w=s(58644),k=s(11827);const A=function(){var e;const[t,s]=(0,l.useState)([]),[x,h]=(0,l.useState)([]),[b,v]=(0,l.useState)(!1),[f,j]=(0,l.useState)([]),[A,C]=(0,l.useState)(""),[S,D]=(0,l.useState)(!1),[T,M]=(0,l.useState)(!1),[P,E]=(0,l.useState)(!1),[I,F]=(0,l.useState)("todo"),[G,O]=(0,l.useState)(()=>{const e=localStorage.getItem("dashboard_tasks");if(e)try{return JSON.parse(e).map(e=>(0,a.A)((0,a.A)({},e),{},{date:new Date(e.date)}))}catch(t){console.error("Error loading tasks from localStorage:",t)}return[{id:1,title:"Meeting with patient #12",time:"12:00",priority:"high",completed:!1,date:new Date},{id:2,title:"Check Documents",time:"1:30",priority:"medium",completed:!1,date:new Date},{id:3,title:"Prepare To-Do",time:"5:10",priority:"low",completed:!1,date:new Date},{id:4,title:"Order Medicines",time:"3:50",priority:"high",completed:!1,date:new Date},{id:5,title:"Check Reports",time:"1:10",priority:"medium",completed:!0,date:new Date}]}),[L,U]=(0,l.useState)(()=>{const e=localStorage.getItem("dashboard_notes");if(e)try{return JSON.parse(e).map(e=>(0,a.A)((0,a.A)({},e),{},{date:new Date(e.date)}))}catch(t){console.error("Error loading notes from localStorage:",t)}return[{id:1,title:"Lorem ipsum dolor",content:"Lorem ipsum dolor sit amet. Ut maiores illum aut repudiandae esse ut odit officiis et minima modi. Et omnis dicta non vitae sequi qui quia minima et rerum sequi sit suscipit sequi qui accusamus assumenda.",date:new Date,image:null},{id:2,title:"Lorem ipsum dolor",content:"Lorem ipsum dolor sit amet. Ut maiores illum aut repudiandae esse ut odit officiis",date:new Date,image:"placeholder"},{id:3,title:"Lorem ipsum dolor",content:"Lorem ipsum dolor sit amet. Ut maiores illum aut repudiandae esse ut odit officiis et minima modi.",date:new Date,image:null}]}),[_,q]=(0,l.useState)(!1),[R,z]=(0,l.useState)(!1),[J,H]=(0,l.useState)(null),[V,B]=(0,l.useState)(null),[Q,W]=(0,l.useState)({title:"",description:"",date:new Date,priority:"medium",time:""}),[Z,K]=(0,l.useState)({title:"",content:"",image:null}),$=(0,r.Zp)(),X=(0,l.useMemo)(()=>null===f||void 0===f?void 0:f.filter(e=>((null===e||void 0===e?void 0:e.title)||"").toLowerCase().includes(A.toLowerCase())),[f,A]);(0,l.useEffect)(()=>{(async()=>{try{const e=await fetch("".concat("","/doctor/stats/yearly"),{credentials:"include"}),t=await e.json();if(e.ok){const e=t,a=null===e||void 0===e?void 0:e.map(e=>e.uniquePatientCount||0),l=null===e||void 0===e?void 0:e.map(e=>e.appointmentCount||0),i=null===e||void 0===e?void 0:e.map(e=>e.totalEarnings||0),r=null===a||void 0===a?void 0:a.reduce((e,t)=>e+t,0),o=null===l||void 0===l?void 0:l.reduce((e,t)=>e+t,0),n=null===i||void 0===i?void 0:i.reduce((e,t)=>e+t,0),d=[92,80,45,15,49,77,70,51,110,20,90,60],c=null===d||void 0===d?void 0:d.reduce((e,t)=>e+t,0);s([{id:1,title:"Total Patients",icon:u.IUz,value:r,percent:45.06,color:["bg-subMain","text-subMain","#66B5A3"],datas:a},{id:2,title:"Appointments",icon:u.VTt,value:o,percent:25.06,color:["bg-yellow-500","text-yellow-500","#F9C851"],datas:l},{id:3,title:"Prescriptions",icon:u.QTF,value:c,percent:65.06,color:["bg-green-500","text-green-500","#34C759"],datas:d},{id:4,title:"Total Earnings",icon:u.QTF,value:"\u20b9"+1e3*n,percent:45.06,color:["bg-red-500","text-red-500","#FF3B30"],datas:i}])}else console.error("Error fetching stats:",t.message)}catch(e){console.error("Fetch failed:",e)}finally{v(!1)}})()},[]);const Y=async()=>{try{v(!0);const e=new URLSearchParams,t=await fetch("".concat("","/doctor/payments?").concat(e.toString()),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await t.json();t.ok?h(s.data||[]):n.Ay.error(s.message||"Failed to fetch data")}catch(e){console.error(e),n.Ay.error("Something went wrong while fetching payments")}finally{v(!1)}},ee=async()=>{try{const e=await fetch("".concat("","/doctor/patients"),{credentials:"include"}),t=await e.json();j(t)}catch(e){console.log("Error fetching data:",e)}};(0,l.useEffect)(()=>{(async()=>{v(!0),await Promise.all([Y(),ee()]),v(!1)})()},[]),(0,l.useEffect)(()=>{localStorage.setItem("dashboard_tasks",JSON.stringify(G))},[G]),(0,l.useEffect)(()=>{localStorage.setItem("dashboard_notes",JSON.stringify(L))},[L]);const te=()=>{if(!Q.title.trim())return void n.Ay.error("Please enter a task title");let e=Q.time;if(e){const[t,s]=e.split(":");e="".concat(t,":").concat(s)}else e=(new Date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1});if(J)O(G.map(t=>t.id===J?(0,a.A)((0,a.A)({},t),{},{title:Q.title,description:Q.description,time:e,priority:Q.priority,date:Q.date}):t)),n.Ay.success("Task updated successfully"),H(null);else{const t={id:Date.now(),title:Q.title,description:Q.description,time:e,priority:Q.priority,completed:!1,date:Q.date};O([...G,t]),n.Ay.success("Task added successfully")}W({title:"",description:"",date:new Date,priority:"medium",time:""}),q(!1),H(null)},se=e=>{H(e.id),W({title:e.title,description:e.description||"",date:e.date,priority:e.priority,time:e.time||""}),q(!0)},ae=e=>{O(G.map(t=>t.id===e?(0,a.A)((0,a.A)({},t),{},{completed:!t.completed}):t))},le=e=>{O(G.filter(t=>t.id!==e)),n.Ay.success("Task deleted")},ie=()=>{if(Z.content.trim()){if(V)U(L.map(e=>e.id===V?(0,a.A)((0,a.A)({},e),{},{title:Z.title||Z.content.substring(0,30),content:Z.content,image:Z.image}):e)),n.Ay.success("Note updated successfully"),B(null);else{const e={id:Date.now(),title:Z.title||Z.content.substring(0,30),content:Z.content,date:new Date,image:Z.image};U([e,...L]),n.Ay.success("Note added successfully")}K({title:"",content:"",image:null}),z(!1),B(null)}else n.Ay.error("Please enter a note")},re=()=>{H(null),W({title:"",description:"",date:new Date,priority:"medium",time:""}),q(!0)},oe=()=>{B(null),K({title:"",content:"",image:null}),z(!0)},ne=()=>{q(!1),z(!1),H(null),B(null),W({title:"",description:"",date:new Date,priority:"medium",time:""}),K({title:"",content:"",image:null})},de=e=>{switch(e){case"high":return"bg-red-500";case"medium":return"bg-yellow-500";case"low":return"bg-green-500";default:return"bg-gray-500"}},ce=e=>e?(e.includes(":"),e):"",xe=[...G].sort((e,t)=>e.time&&t.time?e.time.localeCompare(t.time):0),me=xe.filter(e=>!e.completed),ue=xe.filter(e=>e.completed);return P?(0,g.jsxs)(i.A,{children:[(0,g.jsx)("div",{className:"mb-6",children:(0,g.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[(0,g.jsx)("button",{onClick:()=>E(!1),className:"flex h-8 w-8 items-center justify-center rounded-lg transition-colors hover:bg-gray-100",children:(0,g.jsx)(d.OLK,{className:"text-lg text-gray-700"})}),(0,g.jsxs)("div",{className:"flex items-center gap-1 border-b border-gray-200",children:[(0,g.jsx)("button",{onClick:()=>{F("todo"),ne()},className:"px-4 py-2 text-sm font-medium transition-colors ".concat("todo"===I?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"To-Do"}),(0,g.jsx)("button",{onClick:()=>{F("notes"),ne()},className:"px-4 py-2 text-sm font-medium transition-colors ".concat("notes"===I?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Notes"})]})]})}),"todo"===I&&(0,g.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2",children:[(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"mb-6 flex w-full items-center justify-start gap-3",children:[(0,g.jsx)("button",{onClick:re,className:"rounded-xl bg-blue-600 px-5 py-2 text-sm font-semibold text-white shadow-md transition-all duration-200 hover:bg-blue-700",children:"Add Task"}),(0,g.jsx)("button",{className:"rounded-xl border border-gray-300 bg-white px-5 py-2 text-sm font-medium text-gray-700 shadow-sm transition-all duration-200 hover:bg-gray-50",children:"Filters"})]}),me.length>0&&(0,g.jsx)("div",{className:"space-y-3",children:me.map(e=>(0,g.jsxs)("div",{className:"flex items-center gap-3 rounded-xl border border-gray-200 bg-white px-4 py-3 shadow-md transition-all duration-200 hover:shadow-lg",children:[(0,g.jsx)("div",{className:"h-16 w-1 rounded-full ".concat(de(e.priority)," flex-shrink-0")}),(0,g.jsx)("button",{onClick:()=>ae(e.id),className:"flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-full border-2 border-gray-300 bg-white transition-all duration-200 hover:border-blue-500"}),(0,g.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2.5",children:[(0,g.jsx)("span",{className:"min-w-[55px] flex-shrink-0 text-sm font-semibold text-gray-700",children:ce(e.time)}),(0,g.jsx)("span",{className:"flex-1 truncate text-sm font-medium text-gray-900",children:e.title})]}),(0,g.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-1.5 pr-1",children:[(0,g.jsx)("button",{onClick:()=>se(e),className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-blue-50 hover:text-blue-600",title:"Edit task",children:(0,g.jsx)(d.u6n,{className:"text-base"})}),(0,g.jsx)("button",{onClick:()=>le(e.id),className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-red-50 hover:text-red-600",title:"Delete task",children:(0,g.jsx)(d.id1,{className:"text-base"})})]})]},e.id))}),ue.length>0&&(0,g.jsxs)("div",{className:"mt-10",children:[(0,g.jsxs)("h3",{className:"mb-5 text-base font-semibold text-gray-700",children:["Done (",ue.length,")"]}),(0,g.jsx)("div",{className:"space-y-3",children:ue.map(e=>(0,g.jsxs)("div",{className:"flex items-center gap-3 rounded-xl border border-gray-200 bg-gray-50 px-4 py-3 shadow-md",children:[(0,g.jsx)("div",{className:"h-16 w-1 rounded-full ".concat(de(e.priority)," flex-shrink-0 opacity-60")}),(0,g.jsx)("button",{onClick:()=>ae(e.id),className:"flex h-5 w-5 flex-shrink-0 items-center justify-center rounded-full border-2 border-blue-600 bg-blue-600 transition-all duration-200 hover:bg-blue-700",children:(0,g.jsx)(c.CMH,{className:"text-[10px] text-white"})}),(0,g.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-2.5",children:[(0,g.jsx)("span",{className:"min-w-[55px] flex-shrink-0 text-sm font-semibold text-gray-500",children:ce(e.time)}),(0,g.jsx)("span",{className:"flex-1 truncate text-sm font-medium text-gray-500 line-through",children:e.title})]}),(0,g.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-1.5 pr-1",children:[(0,g.jsx)("button",{onClick:()=>se(e),className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-blue-50 hover:text-blue-600",title:"Edit task",children:(0,g.jsx)(d.u6n,{className:"text-base"})}),(0,g.jsx)("button",{onClick:()=>le(e.id),className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-red-50 hover:text-red-600",title:"Delete task",children:(0,g.jsx)(d.id1,{className:"text-base"})})]})]},e.id))})]}),0===me.length&&0===ue.length&&(0,g.jsx)("div",{className:"py-16 text-center text-gray-500",children:(0,g.jsx)("p",{className:"text-base",children:"No tasks yet. Add a new task to get started!"})})]}),_&&(0,g.jsxs)("div",{className:"sticky top-6 h-[calc(100vh-200px)] overflow-y-auto rounded-xl bg-white p-6 shadow-lg",children:[(0,g.jsxs)("div",{className:"mb-6 flex items-center justify-between border-b border-gray-200 pb-4",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:J?"Edit Task":"Add Task"}),(0,g.jsx)("button",{onClick:ne,className:"rounded-lg p-2 text-gray-400 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-700","aria-label":"Close",children:(0,g.jsx)(d.Gsv,{className:"text-2xl"})})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"Date"}),(0,g.jsxs)("div",{className:"flex gap-3",children:[(0,g.jsx)(m(),{selected:Q.date,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{date:e||new Date})),dateFormat:"d",className:"h-10 w-20 cursor-pointer rounded-lg border border-gray-300 bg-white px-3 text-center text-base hover:bg-gray-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",showPopperArrow:!1,popperPlacement:"bottom-start"}),(0,g.jsx)(m(),{selected:Q.date,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{date:e||new Date})),dateFormat:"MMM",className:"h-10 w-24 cursor-pointer rounded-lg border border-gray-300 bg-white px-3 text-center text-base hover:bg-gray-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",showPopperArrow:!1,popperPlacement:"bottom-start"}),(0,g.jsx)(m(),{selected:Q.date,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{date:e||new Date})),dateFormat:"yyyy",className:"h-10 w-28 cursor-pointer rounded-lg border border-gray-300 bg-white px-3 text-center text-base hover:bg-gray-50 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500",showPopperArrow:!1,popperPlacement:"bottom-start"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"Time"}),(0,g.jsx)("input",{type:"time",value:Q.time,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{time:e.target.value})),className:"h-10 w-full rounded-lg border border-gray-300 bg-white px-3 text-base transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"Title"}),(0,g.jsx)("input",{type:"text",value:Q.title,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{title:e.target.value})),placeholder:"Enter task title",className:"h-10 w-full rounded-lg border border-gray-300 bg-white px-3 text-base transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"mb-2 block text-sm text-gray-600",children:["Description"," ",(0,g.jsx)("span",{className:"font-normal text-gray-400",children:"(optional)"})]}),(0,g.jsx)("textarea",{value:Q.description,onChange:e=>W((0,a.A)((0,a.A)({},Q),{},{description:e.target.value})),placeholder:"Enter task description",rows:4,className:"w-full resize-none rounded-lg border border-gray-300 bg-white px-3 py-2 text-base transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm text-gray-600",children:"Priority"}),(0,g.jsxs)("div",{className:"flex items-center gap-3",children:[(0,g.jsx)("button",{onClick:()=>W((0,a.A)((0,a.A)({},Q),{},{priority:"high"})),className:"h-5 w-5 rounded-full transition-all duration-200 ".concat("high"===Q.priority?"ring-2 ring-red-500 ring-offset-1":""," bg-red-500"),title:"High Priority"}),(0,g.jsx)("button",{onClick:()=>W((0,a.A)((0,a.A)({},Q),{},{priority:"medium"})),className:"h-5 w-5 rounded-full transition-all duration-200 ".concat("medium"===Q.priority?"ring-2 ring-yellow-500 ring-offset-1":""," bg-yellow-500"),title:"Medium Priority"}),(0,g.jsx)("button",{onClick:()=>W((0,a.A)((0,a.A)({},Q),{},{priority:"low"})),className:"h-5 w-5 rounded-full transition-all duration-200 ".concat("low"===Q.priority?"ring-2 ring-green-500 ring-offset-1":""," bg-green-500"),title:"Low Priority"})]})]}),(0,g.jsx)("div",{className:"border-t border-gray-200 pt-6",children:(0,g.jsx)("button",{onClick:te,className:"w-full rounded-xl bg-blue-600 py-3 font-semibold text-white shadow-lg transition-all duration-200 hover:bg-blue-700 hover:shadow-xl","aria-label":J?"Update Task":"Add Task",children:J?"Update Task":"Add Task"})})]})]})]}),"notes"===I&&(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{onClick:oe,className:"mb-6 flex w-full cursor-pointer items-center gap-3 rounded-lg border border-gray-200 bg-white px-4 py-3 shadow-sm transition-colors duration-200 hover:border-blue-500 hover:shadow-md",children:[(0,g.jsx)("input",{type:"text",placeholder:"Add a note...",readOnly:!0,className:"flex-1 cursor-pointer bg-transparent text-sm text-gray-500 outline-none"}),(0,g.jsx)("button",{onClick:e=>{e.stopPropagation(),oe()},className:"rounded-lg p-2 text-gray-400 transition-colors duration-200 hover:bg-blue-50 hover:text-blue-600","aria-label":"Edit/Add note",children:(0,g.jsx)(d.u6n,{className:"text-lg"})}),(0,g.jsx)("button",{onClick:e=>{e.stopPropagation()},className:"rounded-lg p-2 text-gray-400 transition-colors duration-200 hover:bg-gray-50 hover:text-gray-600","aria-label":"Search notes",children:(0,g.jsx)(d.iyI,{className:"text-lg"})})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:L.map(e=>(0,g.jsxs)("div",{className:"relative flex h-full flex-col rounded-2xl border border-gray-200 bg-white px-5 py-4 shadow-md transition-all duration-200 hover:shadow-lg",children:[(0,g.jsxs)("div",{className:"mb-2 flex items-start justify-between",children:[(0,g.jsx)("span",{className:"text-[11px] font-normal text-gray-400",children:e.date.toLocaleDateString("en-US",{weekday:"short",day:"numeric",month:"short"})}),(0,g.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-1",children:[(0,g.jsx)("button",{onClick:()=>(e=>{B(e.id),K({title:e.title,content:e.content,image:e.image}),z(!0)})(e),className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-blue-50 hover:text-blue-600",title:"Edit note",children:(0,g.jsx)(d.u6n,{className:"text-base"})}),(0,g.jsx)("button",{onClick:()=>{return t=e.id,U(L.filter(e=>e.id!==t)),void n.Ay.success("Note deleted");var t},className:"rounded-lg p-1.5 text-gray-400 transition-colors duration-200 hover:bg-red-50 hover:text-red-600",title:"Delete note",children:(0,g.jsx)(d.id1,{className:"text-base"})})]})]}),(0,g.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,g.jsx)("div",{className:"h-2 w-2 flex-shrink-0 rounded-full bg-blue-600"}),(0,g.jsx)("h3",{className:"line-clamp-1 text-sm font-semibold text-gray-900",children:e.title})]}),(0,g.jsx)("p",{className:"mb-2 line-clamp-5 flex-1 text-xs leading-tight text-gray-600",children:e.content}),e.image&&(0,g.jsx)("div",{className:"mt-auto h-28 w-full rounded-lg bg-gray-200"})]},e.id))}),0===L.length&&(0,g.jsx)("div",{className:"py-16 text-center text-gray-500",children:(0,g.jsx)("p",{className:"text-base",children:"No notes yet. Add a new note to get started!"})}),R&&(0,g.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 p-4",children:(0,g.jsxs)("div",{className:"max-h-[90vh] w-full max-w-md overflow-y-auto rounded-xl bg-white p-6 shadow-lg",children:[(0,g.jsxs)("div",{className:"mb-6 flex items-center justify-between border-b border-gray-200 pb-4",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:V?"Edit Note":"Add Note"}),(0,g.jsx)("button",{onClick:ne,className:"rounded-lg p-2 text-gray-400 transition-colors duration-200 hover:bg-gray-100 hover:text-gray-700","aria-label":"Close",children:(0,g.jsx)(d.Gsv,{className:"text-xl"})})]}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Title"}),(0,g.jsx)("input",{type:"text",value:Z.title,onChange:e=>K((0,a.A)((0,a.A)({},Z),{},{title:e.target.value})),placeholder:"Enter note title",className:"h-10 w-full rounded-lg border border-gray-300 bg-white px-3 text-base transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"mb-2 block text-sm font-medium text-gray-700",children:"Description"}),(0,g.jsx)("textarea",{value:Z.content,onChange:e=>K((0,a.A)((0,a.A)({},Z),{},{content:e.target.value})),placeholder:"Enter note description",rows:8,className:"w-full resize-none rounded-lg border border-gray-300 bg-white px-3 py-2 text-base transition-colors focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,g.jsxs)("div",{className:"flex gap-3 border-t border-gray-200 pt-6",children:[(0,g.jsx)("button",{onClick:ne,className:"flex-1 rounded-xl border border-gray-300 bg-white py-3 font-semibold text-gray-700 transition-all duration-200 hover:bg-gray-50","aria-label":"Cancel",children:"Cancel"}),(0,g.jsx)("button",{onClick:ie,className:"flex-1 rounded-xl bg-blue-600 py-3 font-semibold text-white shadow-lg transition-all duration-200 hover:bg-blue-700 hover:shadow-xl","aria-label":V?"Update Note":"Add Note",children:V?"Update":"Add"})]})]})})]})]}):(0,g.jsxs)(i.A,{children:[(0,g.jsx)("div",{className:"mb-4 flex justify-end"}),(0,g.jsxs)("div",{className:"relative justify-between items-center flex mb-6  grid-cols-1 gap-2 xs:grid-cols-2 md:grid-cols-3 lg:grid-cols-7",children:[(0,g.jsx)("input",{type:"text",placeholder:'Search "Patients"',className:"h-11 rounded-md border border-border bg-dry px-4 text-sm text-main md:col-span-2 lg:col-span-3",value:A,onChange:e=>{C(e.target.value),D(!0)},onBlur:()=>{setTimeout(()=>D(!1),150)},onFocus:()=>D(!0)}),(0,g.jsxs)("button",{onClick:()=>E(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:[(0,g.jsx)(d.Ca6,{className:"text-lg"}),(0,g.jsx)("span",{children:"To-Do & Notes"})]}),S&&A&&(0,g.jsxs)("ul",{className:"absolute top-16 z-10 w-full max-w-xs rounded-md border border-gray-200 bg-white shadow-md md:col-span-2 lg:col-span-3",children:[(null===X||void 0===X?void 0:X.length)>0&&X.map((e,t)=>(0,g.jsxs)("li",{className:"flex cursor-pointer flex-row items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onMouseDown:t=>{t.preventDefault(),C((null===e||void 0===e?void 0:e.title)||""),D(!1),$("/patients/preview/".concat(null===e||void 0===e?void 0:e._id))},children:[(0,g.jsx)("img",{src:null===e||void 0===e?void 0:e.image,loading:"lazy",decoding:"async",alt:"Patient",className:"h-10 w-10 rounded-full border border-subMain object-cover"}),(0,g.jsxs)("div",{className:"flex flex-col",children:[(0,g.jsx)("h2",{className:"text-sm font-semibold",children:null===e||void 0===e?void 0:e.title}),(0,g.jsx)("p",{className:"text-xs text-textGray",children:null===e||void 0===e?void 0:e.email}),(0,g.jsx)("p",{className:"text-xs",children:null===e||void 0===e?void 0:e.phone})]})]},t)),0===(null===X||void 0===X?void 0:X.length)&&(0,g.jsxs)("li",{className:"flex cursor-pointer items-center gap-2 px-4 py-2 text-sm text-main hover:bg-gray-100",onMouseDown:e=>{e.preventDefault(),M(!0)},children:[(0,g.jsx)("span",{className:"text-xl font-bold",children:"+"}),(0,g.jsxs)("span",{children:['Add "',A,'" as new patient']})]})]})]}),(0,g.jsxs)("div",{className:"overflow-x-hidden",children:[(0,g.jsx)("div",{className:"grid w-full grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:t.map((e,t)=>(0,g.jsxs)("div",{className:"rounded-xl border-[1px] border-border bg-white !p-5",children:[(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)("div",{className:"flex-colo h-10 w-10 rounded-md bg-opacity-10 ".concat(e.color[1]," ").concat(e.color[0]),children:(0,g.jsx)(e.icon,{})}),(0,g.jsx)("h2",{className:"text-sm font-medium",children:e.title})]}),(0,g.jsxs)("div",{className:"mt-4 grid grid-cols-8 items-center gap-4 overflow-hidden rounded-xl bg-dry !px-8 !py-5",children:[(0,g.jsx)("div",{className:"col-span-5",children:(0,g.jsx)("div",{className:"h-[80px] w-full sm:h-[90px]",children:(0,g.jsx)(p,{data:e.datas,colors:e.color[2]})})}),(0,g.jsxs)("div",{className:"col-span-3 flex flex-col gap-4",children:[(0,g.jsxs)("h4",{className:"text-md font-medium",children:[e.value,(e.id,"")]}),(0,g.jsxs)("p",{className:"flex gap-2 text-sm ".concat(e.color[1]),children:[e.percent>50&&(0,g.jsx)(u.QTF,{}),e.percent>30&&e.percent<50&&(0,g.jsx)(u.VTt,{}),e.percent<30&&(0,g.jsx)(u.IUz,{}),e.percent,"%"]})]})]})]},e.id))}),(0,g.jsxs)("div",{className:"my-6 grid w-full grid-cols-1 gap-6 xl:grid-cols-8",children:[(0,g.jsx)("div",{className:"w-full xl:col-span-6",children:(0,g.jsxs)("div",{className:"mt-6 rounded-xl border-[1px] border-border bg-white p-5",children:[(0,g.jsxs)("div",{className:"flex-btn gap-2",children:[(0,g.jsx)("h2",{className:"text-sm font-medium",children:"Recent Transaction"}),(0,g.jsxs)("p",{className:"flex items-center gap-4 text-sm",children:["Today"," ",(0,g.jsx)("span",{className:"rounded-xl bg-subMain px-2 py-1 text-xs text-white",children:"27000$"})]})]}),(0,g.jsx)("div",{className:"mt-4 overflow-x-scroll",children:(0,g.jsx)(y,{data:x})})]})}),(0,g.jsxs)("div",{"data-aos":"fade-left","data-aos-duration":"1000","data-aos-delay":"10","data-aos-offset":"200",className:"grid gap-6 sm:grid-cols-2 xl:col-span-2 xl:block",children:[(0,g.jsxs)("div",{className:"rounded-xl border-[1px] border-border bg-white !p-5",children:[(0,g.jsx)("h2",{className:"text-sm font-medium",children:"Recent Patients"}),null===f||void 0===f||null===(e=f.slice(0,5))||void 0===e?void 0:e.map((e,t)=>(0,g.jsxs)(o.N_,{to:"/patients/preview/".concat(null===e||void 0===e?void 0:e._id),className:"flex-btn !mt-6 !gap-4 border-b !pb-4",children:[(0,g.jsxs)("div",{className:"flex items-center gap-4",children:[(0,g.jsx)("img",{src:null===e||void 0===e?void 0:e.image,loading:"lazy",decoding:"async",alt:"member",className:"h-10 w-10 rounded-md object-cover"}),(0,g.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,g.jsx)("h3",{className:"text-xs font-medium",children:null===e||void 0===e?void 0:e.title}),(0,g.jsx)("p",{className:"text-xs text-gray-400",children:null===e||void 0===e?void 0:e.phone})]})]}),(0,g.jsx)("p",{className:"text-xs text-textGray",children:"2:00 PM"})]},t))]}),(0,g.jsx)(N,{})]})]})]}),(0,g.jsx)(w.A,{isOpen:T,closeModal:()=>M(!1),title:"Add New Patient",children:(0,g.jsx)(k.A,{closeModal:()=>M(!1),onSuccess:e=>{ee(),C(""),M(!1)}})})]})}}}]);