"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[5005],{15005:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var s=a(9950),n=(a(53663),a(89379)),l=a(28429),o=a(9449),r=a(35887),c=a(26910),i=a(44414);const d=()=>{var e,t;const a=(0,l.zy)(),d=(0,l.Zp)(),m=localStorage.getItem("signupEmail")||(null===(e=a.state)||void 0===e?void 0:e.email)||"",u=localStorage.getItem("signupMobile")||(null===(t=a.state)||void 0===t?void 0:t.phone)||"",{control:x,handleSubmit:p,setValue:h,watch:f}=(0,o.mN)({defaultValues:{emailOTP:["","","","","",""],phoneOTP:["","","","","",""]}}),y=f("emailOTP"),g=f("phoneOTP"),[v,b]=(0,s.useState)(30),[j,P]=(0,s.useState)(30),[T,O]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(v>0){const e=setInterval(()=>b(e=>e-1),1e3);return()=>clearInterval(e)}},[v]),(0,s.useEffect)(()=>{if(j>0){const e=setInterval(()=>P(e=>e-1),1e3);return()=>clearInterval(e)}},[j]);return(0,i.jsx)("div",{className:"flex flex-col items-center justify-center  bg-gray-100 p-7",children:(0,i.jsxs)("div",{className:"bg-white p-10 rounded-lg shadow-md w-full max-w-md lg:max-w-lg xl:max-w-3xl",children:[(0,i.jsx)("h2",{className:"text-2xl font-semibold text-center mb-4",children:"Two Step Verification"}),(0,i.jsxs)("form",{onSubmit:p(async()=>{const e=y.join(""),t=g.join("");if(6===e.length&&6===t.length&&m&&u){O(!0);try{const a={emailOtp:e,mobileOtp:t,email:m,mobileNumber:u};await c.A.post("".concat("","/doctor/verify-both-otp"),a),r.Ay.success("Verification Successfully!"),d("/new-account")}catch(n){var a,s;console.error("Verification Failed:",n),r.Ay.error((null===(a=n.response)||void 0===a||null===(s=a.data)||void 0===s?void 0:s.message)||"Please enter valid OTPs.")}finally{O(!1)}}else r.Ay.error("Please enter valid 6-digit OTPs for both email and mobile.")}),children:[(0,i.jsxs)("div",{className:"mt-4",children:[(0,i.jsx)("p",{className:"font-medium",children:"Verify Email Address"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["To verify your email, We have sent you a code on your email address ",m]}),(0,i.jsx)("div",{className:"flex  gap-2 mt-3",children:y.map((e,t)=>(0,i.jsx)(o.xI,{name:"emailOTP.".concat(t),control:x,render:e=>{let{field:a}=e;return(0,i.jsx)("input",(0,n.A)((0,n.A)({},a),{},{id:"email-otp-".concat(t),type:"text",maxLength:"1",value:a.value||"",onChange:e=>{const a=e.target.value;if(!/^\d*$/.test(a))return;const s=[...y];var n;(s[t]=a,h("emailOTP",s),a&&t<5)&&(null===(n=document.getElementById("email-otp-".concat(t+1)))||void 0===n||n.focus())},onKeyDown:e=>{var a;"Backspace"===e.key&&!y[t]&&t>0&&(null===(a=document.getElementById("email-otp-".concat(t-1)))||void 0===a||a.focus())},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text").slice(0,6).split("");if(t.length){const e=[...y];for(let a=0;a<6;a++)e[a]=t[a]||"";h("emailOTP",e)}},onCopy:e=>{e.preventDefault();const t=y.join("");e.clipboardData.setData("text/plain",t),r.Ay.success("Email OTP copied!")},className:"w-12 h-12 text-center text-xl border rounded-lg focus:ring-2 focus:ring-blue-500"}))}},t))}),(0,i.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:j>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-blue-500",children:"Don't receive OTP?"})," Resend OTP in ",v,"s"]}):(0,i.jsx)("button",{onClick:async()=>{if(m){b(30);try{await c.A.post("".concat("","/doctor/send-otp"),{email:m}),r.Ay.success("Email OTP resent successfully!")}catch(e){console.error("Error resending email OTP:",e),r.Ay.error("Failed to resend email OTP. Please try again.")}}else r.Ay.error("Email address not available.")},className:"text-blue-500 hover:underline",children:"Resend OTP"})})]}),(0,i.jsxs)("div",{className:"mt-6",children:[(0,i.jsx)("p",{className:"font-medium",children:"Verify Mobile Number"}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["To Verify your mobile number ",u,", We have sent you a sms on your phone"]}),(0,i.jsx)("div",{className:"flex  gap-2 mt-3",children:g.map((e,t)=>(0,i.jsx)(o.xI,{name:"phoneOTP.".concat(t),control:x,render:e=>{let{field:a}=e;return(0,i.jsx)("input",(0,n.A)((0,n.A)({},a),{},{id:"phone-otp-".concat(t),type:"text",maxLength:"1",value:a.value||"",onChange:e=>{const a=e.target.value;if(!/^\d*$/.test(a))return;const s=[...g];var n;(s[t]=a,h("phoneOTP",s),a&&t<5)&&(null===(n=document.getElementById("phone-otp-".concat(t+1)))||void 0===n||n.focus())},onKeyDown:e=>{var a;"Backspace"===e.key&&!g[t]&&t>0&&(null===(a=document.getElementById("phone-otp-".concat(t-1)))||void 0===a||a.focus())},onPaste:e=>{e.preventDefault();const t=e.clipboardData.getData("text").slice(0,6).split("");if(t.length){const e=[...g];for(let a=0;a<6;a++)e[a]=t[a]||"";h("phoneOTP",e)}},onCopy:e=>{e.preventDefault();const t=g.join("");e.clipboardData.setData("text/plain",t),r.Ay.success("Phone OTP copied!")},className:"w-12 h-12 text-center text-xl border rounded-lg focus:ring-2 focus:ring-blue-500"}))}},t))}),(0,i.jsx)("p",{className:"text-sm mt-2 text-gray-600",children:j>0?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-blue-500",children:"Don't receive OTP?"})," Resend OTP in ",j,"s"]}):(0,i.jsx)("button",{onClick:async()=>{if(u){P(30);try{await c.A.post("".concat("","/doctor/send-otp"),{mobileNumber:u}),r.Ay.success("Phone OTP resent successfully!")}catch(e){console.error("Error resending phone OTP:",e),r.Ay.error("Failed to resend phone OTP. Please try again.")}}else r.Ay.error("Mobile number not available.")},className:"text-blue-500 hover:underline",children:"Resend OTP"})})]}),(0,i.jsx)("button",{type:"submit",className:"mt-6 w-full bg-blue-500 text-white p-3 rounded-lg hover:bg-blue-600 transition",disabled:T,children:T?"Verifying...":"VERIFY"})]})]})})};var m=a(61094),u=a(45574);const x=function(){const[e,t]=(0,s.useState)(1);return(0,s.useEffect)(()=>{localStorage.setItem("myPath",window.location.pathname)},[]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.A,{}),(0,i.jsxs)("div",{className:"mx-auto w-11/12 bg-gray-100 mt-3",children:[(0,i.jsx)("div",{className:"flex justify-center gap-[1rem] border-b border-gray-200 text-2xl",children:["Login","Generate ID"].map((a,s)=>(0,i.jsx)("span",{onClick:()=>t(s),className:"cursor-pointer px-[5rem] py-[1rem] text-center ".concat(e===s?"border-b-4 border-[#0097DB] text-[#0097DB]":"text-gray-500"," px-4 py-2"),children:a},s))}),0===e?(0,i.jsx)(m.A,{}):(0,i.jsx)(d,{})]})]})}}}]);