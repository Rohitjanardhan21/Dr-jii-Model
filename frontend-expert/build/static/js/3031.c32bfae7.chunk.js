"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[3031],{355:(e,a,o)=>{o.d(a,{A:()=>m});var i=o(89379),s=o(9950),t=o(9449),l=o(28429),r=o(28504),c=o(54826),n=o(35887),d=o(26910),p=o(44414);const m=()=>{var e;const{register:a,handleSubmit:o,watch:m,formState:{errors:u}}=(0,t.mN)(),{Login:g}=(0,r.S)(),h=(0,l.Zp)(),[b,x]=(0,s.useState)(!1),[y,N]=(0,s.useState)(!1),[S,v]=(0,s.useState)(!1),z=m("category"),j=m("subCategory");return(0,p.jsx)("div",{className:"flex items-center justify-center bg-gray-100 p-7",children:(0,p.jsx)("div",{className:"w-full max-w-4xl rounded-lg bg-white p-14 shadow-md lg:max-w-5xl xl:max-w-6xl",children:(0,p.jsxs)("form",{onSubmit:o(async e=>{v(!0);const{role:a,category:o,subCategory:i,specialization:s,healthcareId:t,password:l}=e,r=localStorage.getItem("signupEmail"),c=localStorage.getItem("signupMobile"),p=localStorage.getItem("signupName"),m=localStorage.getItem("emailOtp"),u=localStorage.getItem("mobileOtp"),b="".concat(t,"@hpr.abdm");if(!r||!c||!p||!m||!u)return n.Ay.error("Please complete the sign-up process first."),void v(!1);if(!a||!o||!i||!s||!t||!l)return n.Ay.error("Please fill in all required fields."),void v(!1);const x={email:r,mobileNumber:c,fullName:p,emailOtp:m,mobileOtp:u,role:String(a),category:o,subCategory:i,specialization:s,userName:b,password:l},y={email:x.email,mobileNumber:x.mobileNumber,fullName:x.fullName,emailOtp:"***",mobileOtp:"***",role:x.role,category:x.category,subCategory:x.subCategory,specialization:x.specialization,userName:x.userName,password:"***"};console.log("Sending doctor creation payload:",y),console.log("Full payload structure:",JSON.stringify(x,null,2).replace(/"password":\s*"[^"]*"/,'"password": "***"').replace(/"emailOtp":\s*"[^"]*"/,'"emailOtp": "***"').replace(/"mobileOtp":\s*"[^"]*"/,'"mobileOtp": "***"'));try{var N;const e=await d.A.post("".concat("","/doctor/doctor-create"),x,{headers:{"Content-Type":"application/json"},withCredentials:!0});n.Ay.success("Doctor ID Generated Successfully!"),console.log("Doctor creation response:",e.data);const a=(null===(N=e.data)||void 0===N?void 0:N.data)||e.data,o=null===a||void 0===a?void 0:a.requiresTotpSetup,i=null===a||void 0===a?void 0:a.userId;if(o&&i)console.log("TOTP setup required, navigating to TOTP setup page"),localStorage.removeItem("signupEmail"),localStorage.removeItem("signupMobile"),localStorage.removeItem("signupName"),localStorage.removeItem("emailOtp"),localStorage.removeItem("mobileOtp"),localStorage.setItem("totpSetupUserId",i),h("/totp-setup",{state:{userId:i}});else{console.log("TOTP setup not required, auto-logging in");const e={email:r,password:l};await g(e,h),localStorage.removeItem("signupEmail"),localStorage.removeItem("signupMobile"),localStorage.removeItem("signupName"),localStorage.removeItem("emailOtp"),localStorage.removeItem("mobileOtp")}}catch(O){var S,z,j,w,f,P,C,A,I;console.error("Doctor Creation Failed:",O),console.error("Error response:",null===(S=O.response)||void 0===S?void 0:S.data),console.error("Error status:",null===(z=O.response)||void 0===z?void 0:z.status),console.error("Error message:",null===(j=O.response)||void 0===j||null===(w=j.data)||void 0===w?void 0:w.message);const e=(null===(f=O.response)||void 0===f||null===(P=f.data)||void 0===P?void 0:P.message)||(null===(C=O.response)||void 0===C||null===(A=C.data)||void 0===A?void 0:A.error)||O.message||"Failed to generate Doctor ID. Please try again.";n.Ay.error(e),null!==(I=O.response)&&void 0!==I&&I.data&&console.error("Full error response:",JSON.stringify(O.response.data,null,2))}finally{v(!1)}}),className:"space-y-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Roles"}),(0,p.jsxs)("div",{className:"mt-2 flex flex-col gap-3",children:[(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)("input",(0,i.A)((0,i.A)({type:"radio"},a("role",{required:"Please select a role"})),{},{value:"1",className:"form-radio"})),"I am a Healthcare Professional"]}),(0,p.jsxs)("label",{className:"flex items-center gap-2",children:[(0,p.jsx)("input",(0,i.A)((0,i.A)({type:"radio"},a("role",{required:"Please select a role"})),{},{value:"3",className:"form-radio"})),"I am a Healthcare Professional & Facility Manager"]})]}),u.role&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.role.message})]}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Category"}),(0,p.jsxs)("select",(0,i.A)((0,i.A)({},a("category",{required:"Category is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Category",children:[(0,p.jsx)("option",{value:"",children:"Select"}),(0,p.jsx)("option",{value:"Doctor",children:"Doctor"}),(0,p.jsx)("option",{value:"Nurse",children:"Nurse"})]})),u.category&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.category.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Sub Category"}),(0,p.jsxs)("select",(0,i.A)((0,i.A)({},a("subCategory",{required:"Sub Category is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Sub Category",disabled:!z,children:[(0,p.jsx)("option",{value:"",children:"Select"}),("Doctor"===z?[{subCategory:"Modern Medicine",code:1},{subCategory:"Dentist",code:2},{subCategory:"Homoeopathy",code:3},{subCategory:"Ayurveda",code:4},{subCategory:"Unani",code:5},{subCategory:"Siddha",code:6},{subCategory:"Sowa-Rigpa",code:7},{subCategory:"Nutrician",code:8},{subCategory:"Dietician",code:9}]:[{subCategory:"RANM",code:8},{subCategory:"RN",code:9},{subCategory:"RN & RM",code:10},{subCategory:"RLHV",code:11}]).map(e=>(0,p.jsx)("option",{value:"".concat(e.subCategory,"#").concat(e.code),children:e.subCategory},e.code))]})),u.subCategory&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.subCategory.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Specialization"}),(0,p.jsxs)("select",(0,i.A)((0,i.A)({},a("specialization",{required:"Specialization is required"})),{},{className:"w-full rounded border p-3","aria-label":"Select Specialization",disabled:!j,children:[(0,p.jsx)("option",{value:"",children:"Select"}),j&&(null===(e={"Modern Medicine#1":[{specialization:"Cardiologist",code:"CAR"},{specialization:"Neurologist",code:"NEU"},{specialization:"Orthopaedic Surgeon",code:"ORT"},{specialization:"Gastroenterologist",code:"GAS"},{specialization:"Dermatologist",code:"DER"},{specialization:"Pediatrician",code:"PED"},{specialization:"Radiologist",code:"RAD"},{specialization:"Psychiatrist",code:"PSY"},{specialization:"Endocrinologist",code:"END"},{specialization:"Pulmonologist",code:"PUL"},{specialization:"Nephrologist",code:"NEP"},{specialization:"Oncologist",code:"ONC"},{specialization:"ENT Specialist",code:"ENT"},{specialization:"Ophthalmologist",code:"OPH"},{specialization:"Urologist",code:"URO"},{specialization:"General Surgeon",code:"GSU"},{specialization:"Plastic Surgeon",code:"PLS"},{specialization:"Emergency Medicine",code:"EMR"},{specialization:"Family Physician",code:"FAM"},{specialization:"Rheumatologist",code:"RHE"},{specialization:"Infectious Disease",code:"INF"}],"Dentist#2":[{specialization:"Orthodontist",code:"ORTH"},{specialization:"Periodontist",code:"PERI"},{specialization:"Endodontist",code:"ENDO"},{specialization:"Prosthodontist",code:"PROS"},{specialization:"Oral & Maxillofacial Surgeon",code:"OMS"},{specialization:"Pediatric Dentist",code:"PEDD"},{specialization:"Oral Medicine",code:"OMD"}],"Homoeopathy#3":[{specialization:"General Homoeopathy",code:"HOM"},{specialization:"Pediatric Homoeopathy",code:"PHO"},{specialization:"Dermatologic Homoeopathy",code:"DHO"},{specialization:"Psychiatric Homoeopathy",code:"PSH"}],"Ayurveda#4":[{specialization:"Panchakarma Specialist",code:"PAN"},{specialization:"Kayachikitsa (Internal Medicine)",code:"KAY"},{specialization:"Shalya Tantra (Surgery)",code:"SHY"},{specialization:"Shalakya Tantra (ENT & Ophthalmology)",code:"SHL"},{specialization:"Bala Roga (Pediatrics)",code:"BAL"},{specialization:"Rasashastra & Bhaishajya Kalpana",code:"RAS"}],"Unani#5":[{specialization:"General Unani",code:"UNA"},{specialization:"Tibb-e-Akbar (Internal Medicine)",code:"TAB"},{specialization:"Ilmul Qabalat wa Amraze Niswan (Obstetrics & Gynaecology)",code:"IQN"}],"Siddha#6":[{specialization:"Siddha Medicine",code:"SID"},{specialization:"Siddha Pulmonology",code:"SPD"}],"Sowa-Rigpa#7":[{specialization:"Traditional Sowa-Rigpa",code:"SOW"},{specialization:"Sowa-Rigpa Internal Medicine",code:"SRM"}],"RANM#8":[{specialization:"General Nursing",code:"GN"},{specialization:"Community Health Nurse",code:"CHN"}],"RN#9":[{specialization:"Registered Nurse Specialist",code:"RNS"},{specialization:"Critical Care Nurse",code:"CCN"},{specialization:"Pediatric Nurse",code:"PEN"},{specialization:"Psychiatric Nurse",code:"PSN"}],"RN & RM#10":[{specialization:"Midwifery Specialist",code:"MID"},{specialization:"Maternal & Child Health",code:"MCH"}],"RLHV#11":[{specialization:"Rural Health Specialist",code:"RHS"},{specialization:"Primary Health Care",code:"PHC"}]}[j])||void 0===e?void 0:e.map(e=>(0,p.jsx)("option",{value:"".concat(e.specialization,"#").concat(e.code),children:e.specialization},e.code)))]})),u.specialization&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.specialization.message})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,p.jsxs)("div",{className:"relative w-full",children:[(0,p.jsx)("label",{className:"mb-1 block font-medium",children:"Healthcare Professional ID / Username"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",(0,i.A)((0,i.A)({type:"text"},a("healthcareId",{required:"Healthcare ID is required",pattern:{value:/^[a-zA-Z0-9._-]+$/,message:"Only letters, numbers, dots, underscores allowed"}})),{},{placeholder:"username",className:"w-full rounded border p-3 pr-28"})),(0,p.jsx)("span",{className:"pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-gray-500",children:"@hpr.abdm"})]}),u.healthcareId&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.healthcareId.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Password"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",(0,i.A)((0,i.A)({type:b?"text":"password"},a("password",{required:"Password is required",minLength:{value:8,message:"Password must be at least 8 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,message:"Password must include uppercase, lowercase, number, and special character"}})),{},{className:"w-full rounded border p-3 pr-10","aria-label":"Password"})),(0,p.jsx)("button",{type:"button",onClick:()=>x(!b),className:"absolute inset-y-0 right-3 flex items-center","aria-label":b?"Hide password":"Show password",children:b?(0,p.jsx)(c.mx3,{}):(0,p.jsx)(c.Ny1,{})})]}),u.password&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.password.message})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("label",{className:"block font-medium",children:"Confirm Password"}),(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("input",(0,i.A)((0,i.A)({type:y?"text":"password"},a("confirmPassword",{required:"Confirm your password",validate:e=>e===m("password")||"Passwords do not match"})),{},{className:"w-full rounded border p-3 pr-10","aria-label":"Confirm Password"})),(0,p.jsx)("button",{type:"button",onClick:()=>N(!y),className:"absolute inset-y-0 right-3 flex items-center","aria-label":y?"Hide password":"Show password",children:y?(0,p.jsx)(c.mx3,{}):(0,p.jsx)(c.Ny1,{})})]}),u.confirmPassword&&(0,p.jsx)("p",{className:"text-sm text-red-500",children:u.confirmPassword.message})]})]}),(0,p.jsx)("button",{type:"submit",className:"w-full rounded-lg bg-blue-500 p-3 text-white transition hover:bg-blue-600 disabled:bg-blue-300",disabled:S,children:S?"Generating...":"Submit"})]})})})}},63031:(e,a,o)=>{o.r(a),o.d(a,{default:()=>c});var i=o(9950),s=(o(53663),o(39511),o(355)),t=o(61094),l=o(45574),r=o(44414);const c=function(){const[e,a]=(0,i.useState)(1);return(0,i.useEffect)(()=>{localStorage.setItem("myPath",window.location.pathname)},[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{}),(0,r.jsxs)("div",{className:"mx-auto w-11/12 bg-gray-100 mt-3",children:[(0,r.jsx)("div",{className:"flex justify-center gap-[1rem] border-b border-gray-200 text-2xl",children:["Login","Generate ID"].map((o,i)=>(0,r.jsx)("span",{onClick:()=>a(i),className:"cursor-pointer px-[5rem] py-[1rem] text-center ".concat(e===i?"border-b-4 m border-[#0097DB] text-[#0097DB]":"text-gray-500"," px-4 py-2"),children:o},i))}),0===e?(0,r.jsx)(t.A,{}):(0,r.jsx)(s.A,{})]})]})}}}]);