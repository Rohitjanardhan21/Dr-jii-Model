"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[489],{30489:(e,s,a)=>{a.r(s),a.d(s,{default:()=>m});var r=a(89379),t=a(9950),o=a(9449),l=a(28429),d=a(42074),n=a(26910),c=a(54826),i=a(35887),u=a(44414);const w=e=>{let{label:s,name:a,type:t,showToggle:l,show:d,setShow:n,rules:i,placeholder:w}=e;const{register:m,formState:{errors:p}}=(0,o.xW)();return(0,u.jsxs)("div",{children:[(0,u.jsx)("label",{className:"block font-medium text-gray-700 mb-2",children:s}),(0,u.jsxs)("div",{className:"relative",children:[(0,u.jsx)("input",(0,r.A)((0,r.A)({type:l?d?"text":"password":t},m(a,i)),{},{className:"w-full p-3 border rounded-lg pr-10 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:w})),l&&(0,u.jsx)("button",{type:"button",onClick:()=>n(!d),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:d?(0,u.jsx)(c.mx3,{}):(0,u.jsx)(c.Ny1,{})})]}),p[a]&&(0,u.jsx)("p",{className:"text-red-500 text-sm mt-1",children:p[a].message})]})},m=()=>{const e=(0,l.Zp)(),[s]=(0,d.ok)(),{id:a}=(0,l.g)();console.log(window.location.pathname);const[c,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(!1),[g,x]=(0,t.useState)(!1),b=(0,o.mN)(),{handleSubmit:y,watch:f}=b,j=f("password");return(0,u.jsx)("div",{className:"min-h-screen flex items-center justify-center p-4 bg-gray-100",children:(0,u.jsxs)("div",{className:"bg-white rounded-lg w-full max-w-md p-6 shadow-md",children:[(0,u.jsx)("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Reset Your Password"}),(0,u.jsx)("p",{className:"text-gray-600 mb-6",children:"Please enter your OTP and new password."}),(0,u.jsx)(o.Op,(0,r.A)((0,r.A)({},b),{},{children:(0,u.jsxs)("form",{onSubmit:y(async s=>{x(!0);try{const r=await n.A.post("".concat("","/doctor/resetPassword/").concat(a),{otp:s.otp,password:s.password});console.log(r.data),r.data.success&&(i.Ay.success("Password reset successful!"),e("/"))}catch(o){var r,t;console.error("Password Reset Failed:",o),i.Ay.error((null===(r=o.response)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.message)||"Failed to reset password. Please try again.")}finally{x(!1)}}),className:"space-y-6",children:[(0,u.jsx)(w,{label:"OTP",name:"otp",type:"text",rules:{required:"OTP is required"},placeholder:"Enter OTP"}),(0,u.jsx)(w,{label:"New Password",name:"password",type:"password",showToggle:!0,show:c,setShow:m,rules:{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}},placeholder:"Enter new password"}),(0,u.jsx)(w,{label:"Confirm Password",name:"confirmPassword",type:"password",showToggle:!0,show:p,setShow:h,rules:{required:"Please confirm your password",validate:e=>e===j||"Passwords do not match"},placeholder:"Confirm new password"}),(0,u.jsx)("button",{type:"submit",disabled:g,className:"w-full py-3 rounded-lg text-white font-medium ".concat(g?"bg-gray-400 cursor-not-allowed":"bg-blue-500 hover:bg-blue-600"),children:g?"Resetting Password...":"Reset Password"})]})}))]})})}}}]);